import{k as h,ap as I,r as v,d as g,ac as y,l,m as i,J as r,C as c,q as o,I as b,$ as N,x as U,H as d,E as R,u as V,G as p}from"./vue-SR65qDCS.js";import{g as B,o as Y}from"./asset-D5pFGCn4.js";import{_ as z}from"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const D={class:"app-container"},E={class:"header"},O={class:"rack"},S=["onClick"],$={class:"u-index"},j={class:"u-body"},q={class:"u-label"},A={key:0,class:"u-owner"},F=h({name:"RackDetail"}),G=Object.assign(F,{setup(H){const u=I().params.rackId,m=v([]),s=v(new Set);async function _(){const e=await B(u);m.value=e.data||e||[]}function k(e){s.value.has(e)?s.value.delete(e):s.value.add(e)}async function w(){await f("Y")}async function C(){await f("N")}async function f(e){if(s.value.size===0)return;const t=Array.from(s.value).map(n=>({uIndex:n,occupied:e}));await Y(u,t),s.value.clear(),await _()}return g(_),(e,t)=>{const n=y("el-button"),x=y("el-card");return i(),l("div",D,[r(x,{shadow:"never"},{header:c(()=>[o("div",E,[o("span",null,"机柜 U 位图 - #"+d(V(u)),1),o("div",null,[r(n,{type:"primary",onClick:w},{default:c(()=>t[0]||(t[0]=[p("占用所选")])),_:1,__:[0]}),r(n,{onClick:C},{default:c(()=>t[1]||(t[1]=[p("释放所选")])),_:1,__:[1]}),r(n,{onClick:_},{default:c(()=>t[2]||(t[2]=[p("刷新")])),_:1,__:[2]})])])]),default:c(()=>[o("div",O,[(i(!0),l(b,null,N(m.value,a=>(i(),l("div",{key:a.uIndex,class:U(["urow",{occ:a.occupied==="Y",sel:s.value.has(a.uIndex)}]),onClick:L=>k(a.uIndex)},[o("div",$,"U"+d(a.uIndex),1),o("div",j,[o("div",q,d(a.label||(a.occupied==="Y"?"占用":"空闲")),1),a.owner?(i(),l("div",A,d(a.owner),1)):R("",!0)])],10,S))),128))])]),_:1})])}}}),W=z(G,[["__scopeId","data-v-60f919a8"]]);export{W as default};
