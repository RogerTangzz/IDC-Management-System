import{ar as E,g as P,r as f,ac as i,l as w,m as _,J as o,q as u,C as r,B as R,E as B,H as U,u as s,Z as y,N as z,G as N}from"./vue-SR65qDCS.js";import{_ as K,g as T,r as I}from"./index-Cw83YE5u.js";import{E as M}from"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const $={class:"register"},H={class:"title"},S={class:"register-code"},A=["src"],D={key:0},F={key:1},G={style:{float:"right"}},J={__name:"register",setup(L){const V=E(),{proxy:x}=P(),t=f({username:"",password:"",confirmPassword:"",code:"",uuid:""}),b={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(l,e,a)=>{t.value.password!==e?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},h=f(""),c=f(!1),p=f(!0);function m(){x.$refs.registerRef.validate(l=>{l&&(c.value=!0,I(t.value).then(e=>{const a=t.value.username;M.alert("<font color='red'>恭喜你，您的账号 "+a+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{V.push("/login")}).catch(()=>{})}).catch(()=>{c.value=!1,p.value&&v()}))})}function v(){T().then(l=>{p.value=l.captchaEnabled===void 0?!0:l.captchaEnabled,p.value&&(h.value="data:image/gif;base64,"+l.img,t.value.uuid=l.uuid)})}return v(),(l,e)=>{const a=i("svg-icon"),g=i("el-input"),d=i("el-form-item"),C=i("el-button"),k=i("router-link"),q=i("el-form");return _(),w("div",$,[o(q,{ref:"registerRef",model:s(t),rules:b,class:"register-form"},{default:r(()=>[u("h3",H,U(s(void 0)),1),o(d,{prop:"username"},{default:r(()=>[o(g,{modelValue:s(t).username,"onUpdate:modelValue":e[0]||(e[0]=n=>s(t).username=n),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:r(()=>[o(a,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:r(()=>[o(g,{modelValue:s(t).password,"onUpdate:modelValue":e[1]||(e[1]=n=>s(t).password=n),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:y(m,["enter"])},{prefix:r(()=>[o(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(d,{prop:"confirmPassword"},{default:r(()=>[o(g,{modelValue:s(t).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=n=>s(t).confirmPassword=n),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:y(m,["enter"])},{prefix:r(()=>[o(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),s(p)?(_(),R(d,{key:0,prop:"code"},{default:r(()=>[o(g,{size:"large",modelValue:s(t).code,"onUpdate:modelValue":e[3]||(e[3]=n=>s(t).code=n),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:y(m,["enter"])},{prefix:r(()=>[o(a,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),u("div",S,[u("img",{src:s(h),onClick:v,class:"register-code-img"},null,8,A)])]),_:1})):B("",!0),o(d,{style:{width:"100%"}},{default:r(()=>[o(C,{loading:s(c),size:"large",type:"primary",style:{width:"100%"},onClick:z(m,["prevent"])},{default:r(()=>[s(c)?(_(),w("span",F,"注 册 中...")):(_(),w("span",D,"注 册"))]),_:1},8,["loading"]),u("div",G,[o(k,{class:"link-type",to:"/login"},{default:r(()=>e[4]||(e[4]=[N("使用已有账户登录")])),_:1,__:[4]})])]),_:1})]),_:1},8,["model"]),e[5]||(e[5]=u("div",{class:"el-register-footer"},[u("span",null,"Copyright © 2018-2025 ruoyi.vip All Rights Reserved.")],-1))])}}},Y=K(J,[["__scopeId","data-v-718dd273"]]);export{Y as default};
