import{ap as P,ar as E,r as p,P as L,d as M,ac as n,l as g,m as u,J as a,C as t,G as m,H as N,I as S,$ as U,B as h}from"./vue-SR65qDCS.js";import{_ as q}from"./index-Cw83YE5u.js";import{a as D}from"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const F={class:"maintenance-plan-submit"},G={__name:"submit",setup(H){const c={get:async o=>({data:{planId:o,title:"示例维保计划"}}),submitApproval:async()=>!0},i=P(),_=E(),d=p(!1),f=p({}),v=p(),r=L({approverId:null,comment:""}),y={approverId:[{required:!0,message:"请选择审核人",trigger:"change"}]},I=p([{id:1,name:"管理员1"},{id:2,name:"管理员2"}]),k=async()=>{const o=await c.get(i.params.id);f.value=o.data},V=async()=>{var o;await((o=v.value)==null?void 0:o.validate()),d.value=!0,await c.submitApproval(i.params.id,r.approverId),D.success("提交审核成功"),_.push("/maintenance/plan"),d.value=!1},x=()=>{_.back()};return M(()=>{k()}),(o,e)=>{const s=n("el-form-item"),w=n("el-option"),C=n("el-select"),B=n("el-input"),b=n("el-button"),R=n("el-form"),A=n("el-card");return u(),g("div",F,[a(A,null,{header:t(()=>e[2]||(e[2]=[m(" 提交维保计划审核 ")])),default:t(()=>[a(R,{ref_key:"formRef",ref:v,model:r,rules:y,"label-width":"120px"},{default:t(()=>[a(s,{label:"计划名称"},{default:t(()=>[m(N(f.value.title),1)]),_:1}),a(s,{label:"审核人",prop:"approverId"},{default:t(()=>[a(C,{modelValue:r.approverId,"onUpdate:modelValue":e[0]||(e[0]=l=>r.approverId=l),placeholder:"请选择审核人"},{default:t(()=>[(u(!0),g(S,null,U(I.value,l=>(u(),h(w,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"提交说明",prop:"comment"},{default:t(()=>[a(B,{modelValue:r.comment,"onUpdate:modelValue":e[1]||(e[1]=l=>r.comment=l),type:"textarea",rows:4,placeholder:"请输入提交说明"},null,8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(b,{type:"primary",onClick:V,loading:d.value},{default:t(()=>e[3]||(e[3]=[m(" 提交审核 ")])),_:1,__:[3]},8,["loading"]),a(b,{onClick:x},{default:t(()=>e[4]||(e[4]=[m("取消")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])]),_:1})])}}},z=q(G,[["__scopeId","data-v-ed7fbd52"]]);export{z as default};
