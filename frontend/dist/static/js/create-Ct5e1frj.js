import{k as K,g as Q,ar as W,r as f,ac as s,l as g,m,J as e,C as a,q as R,B as U,E as X,G as p,I as x,$ as C}from"./vue-SR65qDCS.js";import{_ as Y}from"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const Z={class:"app-container"},h={class:"form-footer"},ee=K({name:"MaintenanceCreate"}),le=Object.assign(ee,{setup(ae){const{proxy:i}=Q(),N=W(),M=f(null),w=f(6),k=f(7),I=f([]),P=f([]),$=f([]),t=f({title:"",floor:"",version:"V1.0",mopCategory:"",mopName:"",mopPurpose:"",executionFrequency:1,executionUnit:"month",approverId:void 0,executorId:void 0,notifyUsers:[],tools:"",materials:"",safety:"",specialTools:"",steps:"",inspectionResult:"",remark:""}),O={title:[{required:!0,message:"请输入计划标题",trigger:"blur"}],floor:[{required:!0,message:"请选择楼层",trigger:"change"}],mopCategory:[{required:!0,message:"请选择MOP类别",trigger:"change"}],mopName:[{required:!0,message:"请输入MOP名称",trigger:"blur"}],approverId:[{required:!0,message:"请选择审核人",trigger:"change"}]};function T(){const v=parseInt(w.value)||6,l=parseInt(k.value)||7;I.value=[];for(let n=0;n<v;n++){const u={};for(let d=0;d<l;d++)u[`col${d}`]="";I.value.push(u)}}function F(){i.$modal.confirm("是否复制上次维保计划？").then(()=>{t.value={title:"月度维保计划(复制)",floor:"1",version:"V1.1",mopCategory:"monthly",mopName:"月度设备检修",mopPurpose:"确保设备正常运行",executionFrequency:1,executionUnit:"month",approverId:1,executorId:2,notifyUsers:[1,2],tools:"万用表、螺丝刀、扳手",materials:"润滑油、清洁剂",safety:"安全帽、手套、护目镜",specialTools:"专用检测仪",steps:`1. 检查设备外观
2. 测试运行状态
3. 记录数据`,inspectionResult:"",remark:`[复制自计划#1，复制时间：${i.parseTime(new Date)}]`},i.$modal.msgSuccess("复制成功")})}function B(){i.$refs.formRef.validate(v=>{v&&(i.$modal.msgSuccess("保存成功"),N.push("/business/maintenance"))})}function L(){i.$refs.formRef.validate(v=>{v&&i.$modal.confirm("确认提交审核？").then(()=>{i.$modal.msgSuccess("提交成功，等待审核"),N.push("/business/maintenance")})})}function S(){N.back()}function E(){P.value=[{userId:1,nickName:"王经理"},{userId:2,nickName:"李主管"},{userId:3,nickName:"张总监"}]}function j(){$.value=[{userId:1,nickName:"张三"},{userId:2,nickName:"李四"},{userId:3,nickName:"王五"},{userId:4,nickName:"赵六"}]}return E(),j(),(v,l)=>{const n=s("el-input"),u=s("el-form-item"),d=s("el-col"),r=s("el-option"),_=s("el-select"),V=s("el-row"),b=s("el-divider"),A=s("el-input-number"),c=s("el-button"),D=s("el-table-column"),G=s("el-table"),J=s("el-form"),z=s("el-card");return m(),g("div",Z,[e(z,null,{header:a(()=>l[20]||(l[20]=[R("span",null,"新建维保计划",-1)])),default:a(()=>[e(J,{ref_key:"formRef",ref:M,model:t.value,rules:O,"label-width":"120px"},{default:a(()=>[e(V,null,{default:a(()=>[e(d,{span:12},{default:a(()=>[e(u,{label:"计划标题",prop:"title"},{default:a(()=>[e(n,{modelValue:t.value.title,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.title=o),placeholder:"请输入计划标题"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(u,{label:"楼层编号",prop:"floor"},{default:a(()=>[e(_,{modelValue:t.value.floor,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.floor=o),placeholder:"请选择楼层"},{default:a(()=>[e(r,{label:"1楼",value:"1"}),e(r,{label:"2楼",value:"2"}),e(r,{label:"3楼",value:"3"}),e(r,{label:"4楼",value:"4"}),e(r,{label:"全部楼层",value:"all"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:a(()=>[e(d,{span:12},{default:a(()=>[e(u,{label:"版本号",prop:"version"},{default:a(()=>[e(n,{modelValue:t.value.version,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.version=o),placeholder:"默认V1.0"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(u,{label:"MOP类别",prop:"mopCategory"},{default:a(()=>[e(_,{modelValue:t.value.mopCategory,"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.mopCategory=o),placeholder:"请选择MOP类别"},{default:a(()=>[e(r,{label:"日常维护",value:"daily"}),e(r,{label:"定期保养",value:"regular"}),e(r,{label:"月度检修",value:"monthly"}),e(r,{label:"季度检修",value:"quarterly"}),e(r,{label:"年度检修",value:"annual"}),e(r,{label:"应急维修",value:"emergency"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,{"content-position":"left"},{default:a(()=>l[21]||(l[21]=[p("MOP信息")])),_:1,__:[21]}),e(u,{label:"MOP名称",prop:"mopName"},{default:a(()=>[e(n,{modelValue:t.value.mopName,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.mopName=o),placeholder:"请输入MOP名称"},null,8,["modelValue"])]),_:1}),e(u,{label:"MOP目的",prop:"mopPurpose"},{default:a(()=>[e(n,{modelValue:t.value.mopPurpose,"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.mopPurpose=o),type:"textarea",rows:3,placeholder:"请输入MOP目的"},null,8,["modelValue"])]),_:1}),e(b,{"content-position":"left"},{default:a(()=>l[22]||(l[22]=[p("执行周期")])),_:1,__:[22]}),e(V,null,{default:a(()=>[e(d,{span:12},{default:a(()=>[e(u,{label:"执行频次",prop:"executionFrequency"},{default:a(()=>[e(A,{modelValue:t.value.executionFrequency,"onUpdate:modelValue":l[6]||(l[6]=o=>t.value.executionFrequency=o),min:1,max:100},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(u,{label:"频次单位",prop:"executionUnit"},{default:a(()=>[e(_,{modelValue:t.value.executionUnit,"onUpdate:modelValue":l[7]||(l[7]=o=>t.value.executionUnit=o),placeholder:"请选择单位"},{default:a(()=>[e(r,{label:"次/月",value:"month"}),e(r,{label:"次/季",value:"quarter"}),e(r,{label:"次/年",value:"year"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:a(()=>[e(d,{span:12},{default:a(()=>[e(u,{label:"审核人",prop:"approverId"},{default:a(()=>[e(_,{modelValue:t.value.approverId,"onUpdate:modelValue":l[8]||(l[8]=o=>t.value.approverId=o),placeholder:"请选择审核人"},{default:a(()=>[(m(!0),g(x,null,C(P.value,o=>(m(),U(r,{key:o.userId,label:o.nickName,value:o.userId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(u,{label:"执行审核人",prop:"executorId"},{default:a(()=>[e(_,{modelValue:t.value.executorId,"onUpdate:modelValue":l[9]||(l[9]=o=>t.value.executorId=o),placeholder:"请选择执行审核人"},{default:a(()=>[(m(!0),g(x,null,C(P.value,o=>(m(),U(r,{key:o.userId,label:o.nickName,value:o.userId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"通知人员",prop:"notifyUsers"},{default:a(()=>[e(_,{modelValue:t.value.notifyUsers,"onUpdate:modelValue":l[10]||(l[10]=o=>t.value.notifyUsers=o),multiple:"",placeholder:"请选择通知人员"},{default:a(()=>[(m(!0),g(x,null,C($.value,o=>(m(),U(r,{key:o.userId,label:o.nickName,value:o.userId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,{"content-position":"left"},{default:a(()=>l[23]||(l[23]=[p("工具材料")])),_:1,__:[23]}),e(u,{label:"工具仪表",prop:"tools"},{default:a(()=>[e(n,{modelValue:t.value.tools,"onUpdate:modelValue":l[11]||(l[11]=o=>t.value.tools=o),type:"textarea",rows:2,placeholder:"请输入所需工具仪表"},null,8,["modelValue"])]),_:1}),e(u,{label:"材料",prop:"materials"},{default:a(()=>[e(n,{modelValue:t.value.materials,"onUpdate:modelValue":l[12]||(l[12]=o=>t.value.materials=o),type:"textarea",rows:2,placeholder:"请输入所需材料"},null,8,["modelValue"])]),_:1}),e(u,{label:"安全(PPE)",prop:"safety"},{default:a(()=>[e(n,{modelValue:t.value.safety,"onUpdate:modelValue":l[13]||(l[13]=o=>t.value.safety=o),type:"textarea",rows:2,placeholder:"请输入个人防护装备要求"},null,8,["modelValue"])]),_:1}),e(u,{label:"特殊工具",prop:"specialTools"},{default:a(()=>[e(n,{modelValue:t.value.specialTools,"onUpdate:modelValue":l[14]||(l[14]=o=>t.value.specialTools=o),type:"textarea",rows:2,placeholder:"请输入所需特殊工具或配件"},null,8,["modelValue"])]),_:1}),e(b,{"content-position":"left"},{default:a(()=>l[24]||(l[24]=[p("执行步骤")])),_:1,__:[24]}),e(u,{label:"步骤内容",prop:"steps"},{default:a(()=>[e(n,{modelValue:t.value.steps,"onUpdate:modelValue":l[15]||(l[15]=o=>t.value.steps=o),type:"textarea",rows:5,placeholder:"请输入执行步骤"},null,8,["modelValue"])]),_:1}),e(u,{label:"创建表格"},{default:a(()=>[e(V,{gutter:10},{default:a(()=>[e(d,{span:4},{default:a(()=>[e(n,{modelValue:w.value,"onUpdate:modelValue":l[16]||(l[16]=o=>w.value=o),placeholder:"行数"},null,8,["modelValue"])]),_:1}),e(d,{span:1,style:{"text-align":"center"}},{default:a(()=>l[25]||(l[25]=[p("×")])),_:1,__:[25]}),e(d,{span:4},{default:a(()=>[e(n,{modelValue:k.value,"onUpdate:modelValue":l[17]||(l[17]=o=>k.value=o),placeholder:"列数"},null,8,["modelValue"])]),_:1}),e(d,{span:4},{default:a(()=>[e(c,{onClick:T},{default:a(()=>l[26]||(l[26]=[p("生成表格")])),_:1,__:[26]})]),_:1})]),_:1})]),_:1}),I.value.length>0?(m(),U(u,{key:0},{default:a(()=>[e(G,{data:I.value,border:""},{default:a(()=>[(m(!0),g(x,null,C(k.value,(o,y)=>(m(),U(D,{key:y,label:`列${y+1}`,prop:`col${y}`},{default:a(q=>[e(n,{modelValue:q.row[`col${y}`],"onUpdate:modelValue":H=>q.row[`col${y}`]=H},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128))]),_:1},8,["data"])]),_:1})):X("",!0),e(b,{"content-position":"left"},{default:a(()=>l[27]||(l[27]=[p("其他信息")])),_:1,__:[27]}),e(u,{label:"巡检结果",prop:"inspectionResult"},{default:a(()=>[e(n,{modelValue:t.value.inspectionResult,"onUpdate:modelValue":l[18]||(l[18]=o=>t.value.inspectionResult=o),type:"textarea",rows:3,placeholder:"请输入巡检结果"},null,8,["modelValue"])]),_:1}),e(u,{label:"备注",prop:"remark"},{default:a(()=>[e(n,{modelValue:t.value.remark,"onUpdate:modelValue":l[19]||(l[19]=o=>t.value.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),R("div",h,[e(c,{type:"primary",onClick:B},{default:a(()=>l[28]||(l[28]=[p("保 存")])),_:1,__:[28]}),e(c,{type:"success",onClick:L},{default:a(()=>l[29]||(l[29]=[p("提交审核")])),_:1,__:[29]}),e(c,{onClick:F},{default:a(()=>l[30]||(l[30]=[p("复制上次计划")])),_:1,__:[30]}),e(c,{onClick:S},{default:a(()=>l[31]||(l[31]=[p("取 消")])),_:1,__:[31]})])]),_:1})])}}}),re=Y(le,[["__scopeId","data-v-b87f5ecd"]]);export{re as default};
