import{r as f,g as z,P as D,ac as m,B as P,m as I,C as l,J as t,u as o,Z as C,G as b,D as L,K as Q,q as j,h as E}from"./vue-SR65qDCS.js";import{l as F,i as G}from"./gen-DTykvR6c.js";import"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const J={class:"dialog-footer"},X={__name:"importTable",emits:["ok"],setup(Z,{expose:N,emit:V}){const _=f(0),r=f(!1),w=f([]),v=f([]),{proxy:s}=z(),a=D({pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0}),k=V;function x(){c(),r.value=!0}function S(n){s.$refs.table.toggleRowSelection(n)}function h(n){w.value=n.map(e=>e.tableName)}function c(){F(a).then(n=>{v.value=n.rows,_.value=n.total})}function u(){a.pageNum=1,c()}function T(){s.resetForm("queryRef"),u()}function R(){const n=w.value.join(",");if(n==""){s.$modal.msgError("请选择要导入的表");return}G({tables:n}).then(e=>{s.$modal.msgSuccess(e.msg),e.code===200&&(r.value=!1,k("ok"))})}return N({show:x}),(n,e)=>{const y=m("el-input"),g=m("el-form-item"),d=m("el-button"),U=m("el-form"),p=m("el-table-column"),q=m("el-table"),B=m("pagination"),K=m("el-row"),$=m("el-dialog");return I(),P($,{title:"导入表",modelValue:o(r),"onUpdate:modelValue":e[5]||(e[5]=i=>E(r)?r.value=i:null),width:"800px",top:"5vh","append-to-body":""},{footer:l(()=>[j("div",J,[t(d,{type:"primary",onClick:R},{default:l(()=>e[8]||(e[8]=[b("确 定")])),_:1,__:[8]}),t(d,{onClick:e[4]||(e[4]=i=>r.value=!1)},{default:l(()=>e[9]||(e[9]=[b("取 消")])),_:1,__:[9]})])]),default:l(()=>[t(U,{model:o(a),ref:"queryRef",inline:!0},{default:l(()=>[t(g,{label:"表名称",prop:"tableName"},{default:l(()=>[t(y,{modelValue:o(a).tableName,"onUpdate:modelValue":e[0]||(e[0]=i=>o(a).tableName=i),placeholder:"请输入表名称",clearable:"",style:{width:"180px"},onKeyup:C(u,["enter"])},null,8,["modelValue"])]),_:1}),t(g,{label:"表描述",prop:"tableComment"},{default:l(()=>[t(y,{modelValue:o(a).tableComment,"onUpdate:modelValue":e[1]||(e[1]=i=>o(a).tableComment=i),placeholder:"请输入表描述",clearable:"",style:{width:"180px"},onKeyup:C(u,["enter"])},null,8,["modelValue"])]),_:1}),t(g,null,{default:l(()=>[t(d,{type:"primary",icon:"Search",onClick:u},{default:l(()=>e[6]||(e[6]=[b("搜索")])),_:1,__:[6]}),t(d,{icon:"Refresh",onClick:T},{default:l(()=>e[7]||(e[7]=[b("重置")])),_:1,__:[7]})]),_:1})]),_:1},8,["model"]),t(K,null,{default:l(()=>[t(q,{onRowClick:S,ref:"table",data:o(v),onSelectionChange:h,height:"260px"},{default:l(()=>[t(p,{type:"selection",width:"55"}),t(p,{prop:"tableName",label:"表名称","show-overflow-tooltip":!0}),t(p,{prop:"tableComment",label:"表描述","show-overflow-tooltip":!0}),t(p,{prop:"createTime",label:"创建时间"}),t(p,{prop:"updateTime",label:"更新时间"})]),_:1},8,["data"]),L(t(B,{total:o(_),page:o(a).pageNum,"onUpdate:page":e[2]||(e[2]=i=>o(a).pageNum=i),limit:o(a).pageSize,"onUpdate:limit":e[3]||(e[3]=i=>o(a).pageSize=i),onPagination:c},null,8,["total","page","limit"]),[[Q,o(_)>0]])]),_:1})]),_:1},8,["modelValue"])}}};export{X as default};
