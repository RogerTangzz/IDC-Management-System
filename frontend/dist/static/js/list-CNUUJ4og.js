import{l as T,a as z,c as M,b as P,d as Q,e as W}from"./cache-BZikBRbC.js";import{k as X,g as Y,r as c,ac as i,ag as Z,l as ee,m as b,J as t,C as l,D as R,B as S,u as n,G as f,q as k}from"./vue-SR65qDCS.js";import"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const te={class:"app-container"},le=X({name:"CacheList"}),ce=Object.assign(le,{setup(ae){const{proxy:m}=Y(),N=c([]),V=c([]),s=c({}),g=c(!0),_=c(!1),p=c(""),x=c(window.innerHeight-200);function K(){g.value=!0,T().then(a=>{N.value=a.data,g.value=!1})}function O(){K(),m.$modal.msgSuccess("刷新缓存列表成功")}function F(a){M(a.cacheName).then(e=>{m.$modal.msgSuccess("清理缓存名称["+a.cacheName+"]成功"),h()})}function h(a){const e=a!==void 0?a.cacheName:p.value;e!==""&&(_.value=!0,z(e).then(y=>{V.value=y.data,_.value=!1,p.value=e}))}function U(){h(),m.$modal.msgSuccess("刷新键名列表成功")}function A(a){Q(a).then(e=>{m.$modal.msgSuccess("清理缓存键名["+a+"]成功"),h()})}function H(a){return a.cacheName.replace(":","")}function L(a){return a.replace(p.value,"")}function j(a){P(p.value,a).then(e=>{s.value=e.data})}function q(){W().then(a=>{m.$modal.msgSuccess("清理全部缓存成功")})}return K(),(a,e)=>{const y=i("Collection"),u=i("el-button"),r=i("el-table-column"),$=i("el-table"),C=i("el-card"),d=i("el-col"),E=i("Key"),G=i("Document"),v=i("el-input"),w=i("el-form-item"),D=i("el-row"),I=i("el-form"),B=Z("loading");return b(),ee("div",te,[t(D,{gutter:10},{default:l(()=>[t(d,{span:8},{default:l(()=>[t(C,{style:{height:"calc(100vh - 125px)"}},{header:l(()=>[t(y,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[6]||(e[6]=f()),e[7]||(e[7]=k("span",{style:{"vertical-align":"middle"}},"缓存列表",-1)),t(u,{style:{float:"right",padding:"3px 0"},link:"",type:"primary",icon:"Refresh",onClick:e[0]||(e[0]=o=>O())})]),default:l(()=>[R((b(),S($,{data:n(N),height:n(x),"highlight-current-row":"",onRowClick:h,style:{width:"100%"}},{default:l(()=>[t(r,{label:"序号",width:"60",type:"index"}),t(r,{label:"缓存名称",align:"center",prop:"cacheName","show-overflow-tooltip":!0,formatter:H}),t(r,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),t(r,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:l(o=>[t(u,{link:"",type:"primary",icon:"Delete",onClick:J=>F(o.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[B,n(g)]])]),_:1})]),_:1}),t(d,{span:8},{default:l(()=>[t(C,{style:{height:"calc(100vh - 125px)"}},{header:l(()=>[t(E,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[8]||(e[8]=f()),e[9]||(e[9]=k("span",{style:{"vertical-align":"middle"}},"键名列表",-1)),t(u,{style:{float:"right",padding:"3px 0"},link:"",type:"primary",icon:"Refresh",onClick:e[1]||(e[1]=o=>U())})]),default:l(()=>[R((b(),S($,{data:n(V),height:n(x),"highlight-current-row":"",onRowClick:j,style:{width:"100%"}},{default:l(()=>[t(r,{label:"序号",width:"60",type:"index"}),t(r,{label:"缓存键名",align:"center","show-overflow-tooltip":!0,formatter:L}),t(r,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:l(o=>[t(u,{link:"",type:"primary",icon:"Delete",onClick:J=>A(o.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[B,n(_)]])]),_:1})]),_:1}),t(d,{span:8},{default:l(()=>[t(C,{bordered:!1,style:{height:"calc(100vh - 125px)"}},{header:l(()=>[t(G,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[11]||(e[11]=f()),e[12]||(e[12]=k("span",{style:{"vertical-align":"middle"}},"缓存内容",-1)),t(u,{style:{float:"right",padding:"3px 0"},link:"",type:"primary",icon:"Refresh",onClick:e[2]||(e[2]=o=>q())},{default:l(()=>e[10]||(e[10]=[f("清理全部")])),_:1,__:[10]})]),default:l(()=>[t(I,{model:n(s)},{default:l(()=>[t(D,{gutter:32},{default:l(()=>[t(d,{offset:1,span:22},{default:l(()=>[t(w,{label:"缓存名称:",prop:"cacheName"},{default:l(()=>[t(v,{modelValue:n(s).cacheName,"onUpdate:modelValue":e[3]||(e[3]=o=>n(s).cacheName=o),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{offset:1,span:22},{default:l(()=>[t(w,{label:"缓存键名:",prop:"cacheKey"},{default:l(()=>[t(v,{modelValue:n(s).cacheKey,"onUpdate:modelValue":e[4]||(e[4]=o=>n(s).cacheKey=o),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{offset:1,span:22},{default:l(()=>[t(w,{label:"缓存内容:",prop:"cacheValue"},{default:l(()=>[t(v,{modelValue:n(s).cacheValue,"onUpdate:modelValue":e[5]||(e[5]=o=>n(s).cacheValue=o),type:"textarea",rows:8,readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}});export{ce as default};
