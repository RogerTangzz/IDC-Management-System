import{k as P,g as F,r as d,ac as s,ag as C,l as O,m as h,J as e,D as y,C as n,Z as V,u as t,G as k,B as L,q as B,H as D,K as Q,h as S}from"./vue-SR65qDCS.js";import{f as j,h as z}from"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";function E(m){return j("/monitor/online/list",m)}function G(m){return z("/monitor/online/"+m)}const H={class:"app-container"},J=P({name:"Online"}),Y=Object.assign(J,{setup(m){const{proxy:f}=F(),N=d([]),_=d(!0),g=d(0),r=d(1),u=d(10),p=d({ipaddr:void 0,userName:void 0});function w(){_.value=!0,E(p.value).then(i=>{N.value=i.rows,g.value=i.total,_.value=!1})}function c(){r.value=1,w()}function q(){f.resetForm("queryRef"),c()}function K(i){f.$modal.confirm('是否确认强退名称为"'+i.userName+'"的用户?').then(function(){return G(i.tokenId)}).then(()=>{w(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}return w(),(i,o)=>{const x=s("el-input"),v=s("el-form-item"),b=s("el-button"),R=s("el-form"),a=s("el-table-column"),T=s("el-table"),U=s("pagination"),$=C("hasPermi"),I=C("loading");return h(),O("div",H,[e(R,{model:t(p),ref:"queryRef",inline:!0},{default:n(()=>[e(v,{label:"登录地址",prop:"ipaddr"},{default:n(()=>[e(x,{modelValue:t(p).ipaddr,"onUpdate:modelValue":o[0]||(o[0]=l=>t(p).ipaddr=l),placeholder:"请输入登录地址",clearable:"",style:{width:"200px"},onKeyup:V(c,["enter"])},null,8,["modelValue"])]),_:1}),e(v,{label:"用户名称",prop:"userName"},{default:n(()=>[e(x,{modelValue:t(p).userName,"onUpdate:modelValue":o[1]||(o[1]=l=>t(p).userName=l),placeholder:"请输入用户名称",clearable:"",style:{width:"200px"},onKeyup:V(c,["enter"])},null,8,["modelValue"])]),_:1}),e(v,null,{default:n(()=>[e(b,{type:"primary",icon:"Search",onClick:c},{default:n(()=>o[4]||(o[4]=[k("搜索")])),_:1,__:[4]}),e(b,{icon:"Refresh",onClick:q},{default:n(()=>o[5]||(o[5]=[k("重置")])),_:1,__:[5]})]),_:1})]),_:1},8,["model"]),y((h(),L(T,{data:t(N).slice((t(r)-1)*t(u),t(r)*t(u)),style:{width:"100%"}},{default:n(()=>[e(a,{label:"序号",width:"50",type:"index",align:"center"},{default:n(l=>[B("span",null,D((t(r)-1)*t(u)+l.$index+1),1)]),_:1}),e(a,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),e(a,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),e(a,{label:"所属部门",align:"center",prop:"deptName","show-overflow-tooltip":!0}),e(a,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(a,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(a,{label:"操作系统",align:"center",prop:"os","show-overflow-tooltip":!0}),e(a,{label:"浏览器",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(a,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:n(l=>[B("span",null,D(i.parseTime(l.row.loginTime)),1)]),_:1}),e(a,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[y((h(),L(b,{link:"",type:"primary",icon:"Delete",onClick:Z=>K(l.row)},{default:n(()=>o[6]||(o[6]=[k("强退")])),_:2,__:[6]},1032,["onClick"])),[[$,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[I,t(_)]]),y(e(U,{total:t(g),page:t(r),"onUpdate:page":o[2]||(o[2]=l=>S(r)?r.value=l:null),limit:t(u),"onUpdate:limit":o[3]||(o[3]=l=>S(u)?u.value=l:null)},null,8,["total","page","limit"]),[[Q,t(g)>0]])])}}});export{Y as default};
