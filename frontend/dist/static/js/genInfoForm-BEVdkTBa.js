import{r as U,g as L,d as H,e as B,ac as o,B as y,m as f,C as l,J as e,l as C,E as I,G as u,u as q,q as F,I as v,D as Q,$ as T,K as R}from"./vue-SR65qDCS.js";import{l as X}from"./menu-C9iKMzuk.js";import"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const ee={__name:"genInfoForm",props:{info:{type:Object,default:null},tables:{type:Array,default:null}},setup(a){const P=U([]),x=U([]),{proxy:M}=L(),V=a,E=U({tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]});function S(){V.info.subTableFkName=""}function j(b){b!=="sub"&&(V.info.subTableName="",V.info.subTableFkName="")}function z(b){for(const t in V.tables){const r=V.tables[t].tableName;if(b===r){P.value=V.tables[t].columns;break}}}function D(){X().then(b=>{x.value=M.handleTree(b.data,"menuId")})}return H(()=>{D()}),B(()=>V.info.subTableName,b=>{z(b)}),B(()=>V.info.tplWebType,b=>{b===""&&(V.info.tplWebType="element-plus")}),(b,t)=>{const r=o("el-option"),N=o("el-select"),d=o("el-form-item"),m=o("el-col"),i=o("question-filled"),s=o("el-icon"),p=o("el-tooltip"),k=o("el-input"),W=o("el-radio"),O=o("el-tree-select"),$=o("el-button"),A=o("el-dropdown-item"),G=o("el-dropdown-menu"),J=o("el-dropdown"),w=o("el-row"),K=o("el-form");return f(),y(K,{ref:"genInfoForm",model:a.info,rules:q(E),"label-width":"150px"},{default:l(()=>[e(w,null,{default:l(()=>[e(m,{span:12},{default:l(()=>[e(d,{prop:"tplCategory"},{label:l(()=>t[16]||(t[16]=[u("生成模板")])),default:l(()=>[e(N,{modelValue:a.info.tplCategory,"onUpdate:modelValue":t[0]||(t[0]=n=>a.info.tplCategory=n),onChange:j},{default:l(()=>[e(r,{label:"单表（增删改查）",value:"crud"}),e(r,{label:"树表（增删改查）",value:"tree"}),e(r,{label:"主子表（增删改查）",value:"sub"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,{prop:"tplWebType"},{label:l(()=>t[17]||(t[17]=[u("前端类型")])),default:l(()=>[e(N,{modelValue:a.info.tplWebType,"onUpdate:modelValue":t[1]||(t[1]=n=>a.info.tplWebType=n)},{default:l(()=>[e(r,{label:"Vue2 Element UI 模版",value:"element-ui"}),e(r,{label:"Vue3 Element Plus 模版",value:"element-plus"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,{prop:"packageName"},{label:l(()=>[t[18]||(t[18]=u(" 生成包路径 ")),e(p,{content:"生成在哪个java包下，例如 com.ruoyi.system",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(k,{modelValue:a.info.packageName,"onUpdate:modelValue":t[2]||(t[2]=n=>a.info.packageName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,{prop:"moduleName"},{label:l(()=>[t[19]||(t[19]=u(" 生成模块名 ")),e(p,{content:"可理解为子系统名，例如 system",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(k,{modelValue:a.info.moduleName,"onUpdate:modelValue":t[3]||(t[3]=n=>a.info.moduleName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,{prop:"businessName"},{label:l(()=>[t[20]||(t[20]=u(" 生成业务名 ")),e(p,{content:"可理解为功能英文名，例如 user",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(k,{modelValue:a.info.businessName,"onUpdate:modelValue":t[4]||(t[4]=n=>a.info.businessName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,{prop:"functionName"},{label:l(()=>[t[21]||(t[21]=u(" 生成功能名 ")),e(p,{content:"用作类描述，例如 用户",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(k,{modelValue:a.info.functionName,"onUpdate:modelValue":t[5]||(t[5]=n=>a.info.functionName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,{prop:"genType"},{label:l(()=>[t[22]||(t[22]=u(" 生成代码方式 ")),e(p,{content:"默认为zip压缩包下载，也可以自定义生成路径",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(W,{modelValue:a.info.genType,"onUpdate:modelValue":t[6]||(t[6]=n=>a.info.genType=n),value:"0"},{default:l(()=>t[23]||(t[23]=[u("zip压缩包")])),_:1,__:[23]},8,["modelValue"]),e(W,{modelValue:a.info.genType,"onUpdate:modelValue":t[7]||(t[7]=n=>a.info.genType=n),value:"1"},{default:l(()=>t[24]||(t[24]=[u("自定义路径")])),_:1,__:[24]},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,null,{label:l(()=>[t[25]||(t[25]=u(" 上级菜单 ")),e(p,{content:"分配到指定菜单下，例如 系统管理",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(O,{modelValue:a.info.parentMenuId,"onUpdate:modelValue":t[8]||(t[8]=n=>a.info.parentMenuId=n),data:q(x),props:{value:"menuId",label:"menuName",children:"children"},"value-key":"menuId",placeholder:"请选择系统菜单","check-strictly":""},null,8,["modelValue","data"])]),_:1})]),_:1}),a.info.genType=="1"?(f(),y(m,{key:0,span:24},{default:l(()=>[e(d,{prop:"genPath"},{label:l(()=>[t[26]||(t[26]=u(" 自定义路径 ")),e(p,{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(k,{modelValue:a.info.genPath,"onUpdate:modelValue":t[10]||(t[10]=n=>a.info.genPath=n)},{append:l(()=>[e(J,null,{dropdown:l(()=>[e(G,null,{default:l(()=>[e(A,{onClick:t[9]||(t[9]=n=>a.info.genPath="/")},{default:l(()=>t[28]||(t[28]=[u("恢复默认的生成基础路径")])),_:1,__:[28]})]),_:1})]),default:l(()=>[e($,{type:"primary"},{default:l(()=>t[27]||(t[27]=[u(" 最近路径快速选择 "),F("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)])),_:1,__:[27]})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):I("",!0)]),_:1}),a.info.tplCategory=="tree"?(f(),C(v,{key:0},[t[32]||(t[32]=F("h4",{class:"form-header"},"其他信息",-1)),Q(e(w,null,{default:l(()=>[e(m,{span:12},{default:l(()=>[e(d,null,{label:l(()=>[t[29]||(t[29]=u(" 树编码字段 ")),e(p,{content:"树显示的编码字段名， 如：dept_id",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(N,{modelValue:a.info.treeCode,"onUpdate:modelValue":t[11]||(t[11]=n=>a.info.treeCode=n),placeholder:"请选择"},{default:l(()=>[(f(!0),C(v,null,T(a.info.columns,(n,g)=>(f(),y(r,{key:g,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,null,{label:l(()=>[t[30]||(t[30]=u(" 树父编码字段 ")),e(p,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(N,{modelValue:a.info.treeParentCode,"onUpdate:modelValue":t[12]||(t[12]=n=>a.info.treeParentCode=n),placeholder:"请选择"},{default:l(()=>[(f(!0),C(v,null,T(a.info.columns,(n,g)=>(f(),y(r,{key:g,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,null,{label:l(()=>[t[31]||(t[31]=u(" 树名称字段 ")),e(p,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(N,{modelValue:a.info.treeName,"onUpdate:modelValue":t[13]||(t[13]=n=>a.info.treeName=n),placeholder:"请选择"},{default:l(()=>[(f(!0),C(v,null,T(a.info.columns,(n,g)=>(f(),y(r,{key:g,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[R,a.info.tplCategory=="tree"]])],64)):I("",!0),a.info.tplCategory=="sub"?(f(),C(v,{key:1},[t[35]||(t[35]=F("h4",{class:"form-header"},"关联信息",-1)),e(w,null,{default:l(()=>[e(m,{span:12},{default:l(()=>[e(d,null,{label:l(()=>[t[33]||(t[33]=u(" 关联子表的表名 ")),e(p,{content:"关联子表的表名， 如：sys_user",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(N,{modelValue:a.info.subTableName,"onUpdate:modelValue":t[14]||(t[14]=n=>a.info.subTableName=n),placeholder:"请选择",onChange:S},{default:l(()=>[(f(!0),C(v,null,T(a.tables,(n,g)=>(f(),y(r,{key:g,label:n.tableName+"："+n.tableComment,value:n.tableName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(d,null,{label:l(()=>[t[34]||(t[34]=u(" 子表关联的外键名 ")),e(p,{content:"子表关联的外键名， 如：user_id",placement:"top"},{default:l(()=>[e(s,null,{default:l(()=>[e(i)]),_:1})]),_:1})]),default:l(()=>[e(N,{modelValue:a.info.subTableFkName,"onUpdate:modelValue":t[15]||(t[15]=n=>a.info.subTableFkName=n),placeholder:"请选择"},{default:l(()=>[(f(!0),C(v,null,T(q(P),(n,g)=>(f(),y(r,{key:g,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):I("",!0)]),_:1},8,["model","rules"])}}};export{ee as default};
