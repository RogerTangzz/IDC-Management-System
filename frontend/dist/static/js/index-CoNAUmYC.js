import{k as L,ar as $,r as i,d as M,ac as s,ag as T,l as y,m as c,J as e,D as I,C as o,I as W,$ as j,B as C,G as d,H as q,K as E}from"./vue-SR65qDCS.js";import{l as F,a as G}from"./asset-D5pFGCn4.js";import"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const H={class:"app-container"},J=L({name:"RackList"}),Z=Object.assign(J,{setup(K){const R=$(),_=i([]),g=i([]),f=i(0),v=i(!1),n=i({pageNum:1,pageSize:10,roomId:void 0,status:void 0});function x(l){const t=_.value.find(u=>u.roomId===l);return t?t.name:l}function w(l){R.push(`/business/asset/rack/detail/${l.rackId}`)}async function N(){const l=await F({pageNum:1,pageSize:999});_.value=l.rows||l.data||[]}async function p(){v.value=!0;try{const l=await G({...n.value});g.value=l.rows||l.data||[],f.value=l.total||0}finally{v.value=!1}}function S(){n.value={pageNum:1,pageSize:10,roomId:void 0,status:void 0},p()}function V(){window.alert("导出功能待实现")}return M(async()=>{await N(),await p()}),(l,t)=>{const u=s("el-option"),k=s("el-select"),b=s("el-form-item"),m=s("el-button"),D=s("el-form"),r=s("el-table-column"),h=s("el-progress"),z=s("el-table"),U=s("pagination"),B=T("loading");return c(),y("div",H,[e(D,{inline:!0,model:n.value,class:"mb8"},{default:o(()=>[e(b,{label:"机房",prop:"roomId"},{default:o(()=>[e(k,{modelValue:n.value.roomId,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.roomId=a),clearable:"",placeholder:"请选择机房",style:{width:"200px"}},{default:o(()=>[(c(!0),y(W,null,j(_.value,a=>(c(),C(u,{key:a.roomId,label:a.name,value:a.roomId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"状态",prop:"status"},{default:o(()=>[e(k,{modelValue:n.value.status,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value.status=a),clearable:"",placeholder:"请选择状态",style:{width:"160px"}},{default:o(()=>[e(u,{label:"正常",value:"normal"}),e(u,{label:"预留",value:"reserved"}),e(u,{label:"故障",value:"fault"}),e(u,{label:"下线",value:"offline"})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:o(()=>[e(m,{type:"primary",icon:"Search",onClick:p},{default:o(()=>t[4]||(t[4]=[d("查询")])),_:1,__:[4]}),e(m,{icon:"Refresh",onClick:S},{default:o(()=>t[5]||(t[5]=[d("重置")])),_:1,__:[5]}),e(m,{icon:"Download",onClick:V},{default:o(()=>t[6]||(t[6]=[d("导出")])),_:1,__:[6]})]),_:1})]),_:1},8,["model"]),I((c(),C(z,{data:g.value,onRowDblclick:w},{default:o(()=>[e(r,{label:"机柜编号",prop:"code",width:"140"}),e(r,{label:"机房",prop:"roomId",width:"120"},{default:o(a=>[d(q(x(a.row.roomId)),1)]),_:1}),e(r,{label:"总U",prop:"uTotal",width:"80"}),e(r,{label:"占用率",prop:"occupancyRate",width:"120"},{default:o(a=>[e(h,{percentage:Math.round((a.row.occupancyRate||0)*100),"text-inside":!0},null,8,["percentage"])]),_:1}),e(r,{label:"额定功率(W)",prop:"powerRated",width:"120"}),e(r,{label:"当前功率(W)",prop:"powerCurrent",width:"120"}),e(r,{label:"状态",prop:"status",width:"100"}),e(r,{label:"操作",width:"120"},{default:o(a=>[e(m,{type:"primary",link:"",onClick:O=>w(a.row)},{default:o(()=>t[7]||(t[7]=[d("详情")])),_:2,__:[7]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,v.value]]),I(e(U,{total:f.value,page:n.value.pageNum,"onUpdate:page":t[2]||(t[2]=a=>n.value.pageNum=a),limit:n.value.pageSize,"onUpdate:limit":t[3]||(t[3]=a=>n.value.pageSize=a),onPagination:p},null,8,["total","page","limit"]),[[E,f.value>0]])])}}});export{Z as default};
