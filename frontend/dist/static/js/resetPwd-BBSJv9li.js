import{m as g}from"./user-brpwFzy8.js";import{g as c,P as b,r as V,ac as n,B as x,m as y,C as l,J as r,u as s,G as w}from"./vue-SR65qDCS.js";import"./index-Cw83YE5u.js";import"./element-D8D5Bqo2.js";import"./vendor-C71Ev03J.js";const T={__name:"resetPwd",setup(q){const{proxy:u}=c(),o=b({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),i=V({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(m,e,a)=>{o.newPassword!==e?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]});function f(){u.$refs.pwdRef.validate(m=>{m&&g(o.oldPassword,o.newPassword).then(e=>{u.$modal.msgSuccess("修改成功")})})}function P(){u.$tab.closePage()}return(m,e)=>{const a=n("el-input"),d=n("el-form-item"),p=n("el-button"),_=n("el-form");return y(),x(_,{ref:"pwdRef",model:s(o),rules:s(i),"label-width":"80px"},{default:l(()=>[r(d,{label:"旧密码",prop:"oldPassword"},{default:l(()=>[r(a,{modelValue:s(o).oldPassword,"onUpdate:modelValue":e[0]||(e[0]=t=>s(o).oldPassword=t),placeholder:"请输入旧密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(d,{label:"新密码",prop:"newPassword"},{default:l(()=>[r(a,{modelValue:s(o).newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>s(o).newPassword=t),placeholder:"请输入新密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(d,{label:"确认密码",prop:"confirmPassword"},{default:l(()=>[r(a,{modelValue:s(o).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).confirmPassword=t),placeholder:"请确认新密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(d,null,{default:l(()=>[r(p,{type:"primary",onClick:f},{default:l(()=>e[3]||(e[3]=[w("保存")])),_:1,__:[3]}),r(p,{type:"danger",onClick:P},{default:l(()=>e[4]||(e[4]=[w("关闭")])),_:1,__:[4]})]),_:1})]),_:1},8,["model","rules"])}}};export{T as default};
