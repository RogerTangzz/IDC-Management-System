# DC系统开发功能与业务逻辑设计规范 V2.0

## 目录

- [性能指标](#性能指标)
- [技术要求](#技术要求)
- [文件处理规范](#文件处理规范)
- [API接口规范](#api接口规范)
- [一、用户认证系统](#一用户认证系统)
- [二、维保计划模块](#二维保计划模块)
- [三、故障工单模块](#三故障工单模块)
- [四、巡检管理模块](#四巡检管理模块)
- [五、资产管理模块（机房资产可视化台账）](#五资产管理模块机房资产可视化台账)
- [六、知识库模块](#六知识库模块)
- [七、审批中心](#七审批中心)
- [八、统计分析模块](#八统计分析模块)
- [九、通知中心](#九通知中心)
- [十、消息中心](#十消息中心)
- [十一、报表模块](#十一报表模块)
- [十二、用户管理](#十二用户管理)
- [十三、操作日志](#十三操作日志)
- [十四、标签管理](#十四标签管理)
- [十五、全局导航栏](#十五全局导航栏)
- [十六、首页看板](#十六首页看板)
- [十七、系统设置（仅超级管理员）](#十七系统设置仅超级管理员)
- [十八、数据权限规则](#十八数据权限规则)
- [十九、业务流程说明](#十九业务流程说明)
- [二十、系统集成接口](#二十系统集成接口)
- [二十二、并发与冲突处理](#二十二并发与冲突处理)
- [二十三、异常处理机制](#二十三异常处理机制)
- [二十四、搜索功能规范](#二十四搜索功能规范)
- [二十五、监控告警](#二十五监控告警)
- [附录](#附录)

## 性能指标

- **并发用户数**：30人同时在线
- **页面加载**：≤3秒
- **数据查询**：≤2秒（单表10万条记录内）
- **表单提交**：≤3秒
- **报表生成**：≤10秒
- **系统可用率**：≥99.9%（年停机≤8.76小时）

## 技术要求

- **部署环境**：阿里云服务器（1核1G内存）
- **浏览器支持**：Chrome 90+、Firefox 88+、Safari 14+、Edge 90+
- **移动端**：响应式设计，支持手机浏览器
- **最小分辨率**：PC端1366×768，移动端375×667

## 文件处理规范

- **图片上传**：单文件5MB，>2MB自动压缩70%质量，格式JPG/PNG/GIF
- **文档上传**：单文件10MB，格式PDF/DOC/DOCX/XLS/XLSX
- **用户配额**：每用户2GB存储空间
- **附件数量**：单次最多10个文件

## API接口规范

```json
// 统一返回格式
{
  "code": 200, // 200成功 400参数错误 401未授权 403无权限 404不存在 500服务器错误
  "message": "成功",
  "data": {},
  "timestamp": 1234567890
}
```

**接口限流**：普通接口100次/分钟，查询接口200次/分钟，导出接口10次/分钟

## 一、用户认证系统

### （一）登录功能

- **用户名**：文本输入框，必填，4-20字符
- **密码**：密码输入框，必填，8-20字符
- **记住我**：复选框，可选，Cookie保存7天
- **验证码**：图片验证码，连续3次失败后显示
- **登录按钮**：验证用户信息，失败5次锁定15分钟
- **注册链接**：跳转到注册界面
- **忘记密码**：链接（预留功能）

### （二）注册功能（每人固定的账户密码但是密码可以自己改）

- **用户名**：文本输入框，必填，4-20字符，不可重复，实时校验
- **密码**：密码输入框，必填，8位以上，包含大小写字母+数字
- **确认密码**：密码输入框，必填，需与密码一致
- **真实姓名**：文本输入框，必填，2-20字符
- **角色选择**：下拉菜单（超级管理员/管理层/运维工程师/巡检员）（平时隐藏超级管理员和管理层）
- **手机号**：文本输入框，必填，11位数字，格式校验
- **邮箱**：邮箱输入框，选填，格式校验
- **注册并登录**：创建账户并自动登录
- **返回登录**：返回登录界面链接

### （三）角色权限矩阵

| 功能模块 | 超级管理员 | 管理层 | 运维工程师 | 巡检员 |
|---------|-----------|--------|-----------|--------|
| 维保计划 | 增删改查 | 增删改查 | 查看/执行 | 查看 |
| 工单 | 增删改查 | 增删改查 | 增删改查 | 增查 |
| 巡检 | 增删改查 | 增删改查 | 增改查 | 增改查 |
| 资产 | 增删改查 | 增删改查 | 增删改查 | 无 |
| 知识库 | 增删改查 | 增删改查 | 增改查看 | 查看 |
| 审批中心 | 配置/审批 | 查看/审批 | 申请 | 申请 |
| 用户管理 | 增删改查 | 查看 | 无 | 无 |
| 系统设置 | 完全权限 | 无 | 无 | 无 |

### （四）权限代理

- **应用场景**：请假期间权限委托
- **代理范围**：仅工单处理和巡检任务
- **设置入口**：用户中心→权限代理
- **时间限制**：最长30天，到期自动收回
- **操作标记**：日志显示"代XX执行"

## 二、维保计划模块

### 新建维保计划

- **标题**：文本输入框，必填，限200字符
- **楼层编号**：下拉菜单（1楼/2楼/3楼/4楼/全部楼层）
- **版本**：文本输入框，默认V1.0，格式V数字.数字
- **MOP信息**：
  - **MOP类别**：下拉菜单（日常维护/定期保养/年度检修/应急维修）
  - **执行周期**：
    - 频次：数字输入框，1-999
    - 单位：下拉菜单（次/月、次/季、次/年）
- **审核人**：下拉菜单，显示所有管理员账户
- **MOP名称**：文本输入框，必填，限100字符
- **MOP目的**：多行文本框，限500字符
- **通知相关人员**：多选下拉框，支持搜索，可选多人
- **工具仪表**：多行文本框，限1000字符
- **材料**：多行文本框，限1000字符
- **安全（PPE）**：多行文本框，限500字符
- **特殊工具（所需配件）**：多行文本框，限500字符
- **步骤内容**：富文本编辑器，支持表格/图片/列表
  - **创建表格**：
    - 表格规格：行数×列数输入框（如6×7）
    - 生成表格按钮：点击生成空表格
    - 单元格编辑：双击编辑内容
    - 合并单元格：选中后右键菜单
- **巡检结果**：多行文本框，限2000字符
- **备注**：多行文本框，限2000字符
- **执行审核人**：下拉菜单，显示管理员（二级审核）
- **保存按钮**：保存为草稿
- **提交审核**：提交给审核人

### 复制上次维保计划

- **触发方式**：点击"新建维保计划"后显示"复制上次计划"按钮
- **复制内容**：自动填充上次所有字段
- **自动处理**：
  - 标题后添加"(复制)"
  - 版本号递增（V1.0→V1.1）
  - 备注添加："[复制自计划#X，复制时间：YYYY-MM-DD HH:MM]"
  - 清空执行结果

### 维保计划列表搜索筛选

- **关键词搜索**：输入框，搜索标题和MOP名称
- **楼层筛选**：下拉菜单（全部/1楼/2楼/3楼/4楼）
- **MOP类别筛选**：下拉菜单（全部/日常维护/定期保养/年度检修/应急维修）
- **审核状态筛选**：下拉菜单（全部/待审核/已审核/已拒绝）
- **执行状态筛选**：下拉菜单（全部/待执行/执行中/已完成）
- **时间范围**：开始日期和结束日期选择器
- **重置按钮**：清空所有筛选条件

### 维保计划列表显示

**表格列**：
- ID：自增编号
- 标题：限200字符显示
- 楼层：显示楼层名称
- 版本：显示版本号
- MOP类别：显示类别名称
- 执行周期：显示频次和单位
- 审核状态：待审核（黄）/已审核（绿）/已拒绝（红）
- 执行状态：待执行/执行中/已完成
- 审核人：显示姓名
- 创建时间：YYYY-MM-DD HH:MM
- 下次执行时间：自动计算显示
- 操作：详情/编辑/删除/生成工单按钮

### 审批流程规则

- **24小时未审批**：系统消息提醒审核人
- **48小时未审批**：邮件提醒+标记"延迟"黄色标签
- **72小时未审批**：自动通过（系统设置可关闭）
- **审批记录**：记录审批时间、审批人、审批意见

## 三、故障工单模块

### 3.1 新建工单

- **模板选择**：下拉菜单，位于顶部（空调滴水/UPS故障/温度告警/配电跳闸/消防误报/自定义模板）
- **标题**：文本输入框，必填，限200字符
- **描述**：多行文本框，必填，限5000字符
- **优先级**：下拉菜单（低/中/高），选择后自动显示处理时限
  - 低：24小时（绿色显示）
  - 中：8小时（黄色显示）
  - 高：4小时（红色显示）
- **报修人**：文本输入框，默认当前用户，可修改
- **故障设备名称**：文本输入框，支持从设备库选择
- **设备专业**：下拉菜单（暖通/配电/消防/弱电）
- **设备故障状况描述（含位置）**：多行文本框，限2000字符
- **设备故障发现时间**：日期时间选择器，默认当前时间
- **应急处置方法**：多行文本框，限1000字符
- **报修人签认**：文本输入框，电子签名
- **是否通知专业工程师**：复选框
- **故障处理方法**：多行文本框，限2000字符，工程师填写
- **设备故障排除时间**：日期时间选择器
- **维修人签认**：文本输入框，电子签名
- **状态**：下拉菜单（新建/处理中/已完成/已关闭）
- **标签**：标签输入框，支持多标签，回车添加
- **上传附件**：
  - 图片：最多10张，每张5MB，支持拖拽
  - 视频：最多3个，每个50MB
  - 文档：PDF/Word，10MB
- **提交按钮**：创建工单
- **保存草稿**：暂存不提交

### 3.2 工单模板管理（仅管理员）

- **模板名称**：文本输入框，必填
- **适用故障类型**：下拉菜单
- **默认优先级**：下拉菜单
- **默认专业**：下拉菜单
- **默认描述**：多行文本框，限1000字符
- **默认处理方案**：多行文本框，限1000字符
- **保存模板按钮**：保存到模板库

### 3.3 工单列表显示

**表格列**：
- ID：工单编号
- 标题：限50字符显示，悬停显示全部
- 状态：下拉菜单，可直接修改
- 优先级：低（绿）/中（黄）/高（红）/紧急（紫）
- 处理时限：显示小时数
- 剩余时间：倒计时显示，超时红色闪烁
- 超时标记：超时显示"已超时X小时"
- 报修人：显示姓名
- 故障设备：显示设备名称
- 设备专业：显示专业类型
- 发现时间：YYYY-MM-DD HH:MM
- 指派给：显示处理人，可下拉修改
- 协助人：显示协助人员
- 标签：显示所有标签
- 操作：指派/详情/编辑/关闭按钮

### 3.4 工单自动升级规则

- **检查频率**：系统每小时自动检查
- **升级规则**（不重新计算时限）：
  - 低→中：创建超24小时未处理
  - 中→高：创建超8小时未处理
  - 高→紧急：创建超4小时未处理
- **升级动作**：
  - 更新优先级标记颜色
  - 系统消息通知处理人
  - 邮件通知管理员
  - 添加"已自动升级"标签
  - 记录升级日志
- **手动降级**：仅管理员可操作，需填写原因

### 3.5 工单高级功能

- **专业分类筛选**：按设备专业筛选工单
- **协助者指派**：可指派多个协助人员
- **标签管理**：支持自定义标签颜色和名称
- **批量操作**：批量指派/批量关闭
- **工单导出**：导出Excel报表

### 维保和故障工单搜索功能添加

#### 3.3.1 顶部快捷筛选栏

- **我的专业**：快捷按钮，暖通工程师看暖通工单，配电工程师看配电工单
- **指派给我**：快捷按钮，筛选指派给当前用户的工单
- **协助工单**：快捷按钮，筛选我作为协助人的工单
- **紧急工单**：快捷按钮，筛选高优先级和超时工单
- **今日新增**：快捷按钮，筛选今天创建的工单

#### 3.3.2 专业分类视图（Tab切换）

- **全部工单**：`<徽章>总数</徽章>`
- **暖通故障**：`<徽章>XX</徽章>`
  - 空调滴水、温度异常、冷冻站故障、冷却塔故障
- **配电故障**：`<徽章>XX</徽章>`
  - 断电、跳闸、UPS故障、PDU故障、发电机故障
- **消防故障**：`<徽章>XX</徽章>`
  - 消防报警、烟感故障、喷淋故障、消防泵故障
- **弱电故障**：`<徽章>XX</徽章>`
  - 网络中断、监控故障、门禁故障、通信故障
- **其他故障**：`<徽章>XX</徽章>`
  - 未分类或综合性故障

#### 3.3.3 高级筛选面板（可折叠）

**快速搜索**：
- 工单编号：文本输入框，精确匹配
- 关键词：文本输入框，搜索标题+描述

**专业分类**：（支持多选）
- □ 暖通 □ 配电 □ 消防 □ 弱电 □ 其他

**设备类型细分**：（根据专业动态显示）
- 暖通类
- 配电类
- 消防类
- 弱电类

**工单状态**：（支持多选）
- □ 新建 □ 已指派 □ 处理中 □ 已完成 □ 已关闭 □ 已取消

**优先级**：（支持多选）
- □ 低(48h) □ 中(24h) □ 高(12h) □ 紧急(2h)

**时间筛选**：
- 创建时间：○今天 ○本周 ○本月 ○自定义范围
- 完成时间：开始日期---结束日期

**人员筛选**：
- 报修人：下拉搜索框
- 处理人：下拉搜索框
- 协助人：下拉搜索框

**楼层位置**：
- □ B1楼 □ 1楼 □ 2楼 □ 3楼 □ 4楼

**标签筛选**：
- 输入标签名称，支持多个

**特殊筛选**：
- □ 仅显示超时工单
- □ 仅显示已升级工单
- □ 仅显示有附件的工单
- □ 仅显示重复故障

### 3.6 数据权限优化

| 角色 | 查看权限 | 筛选权限 |
|------|---------|----------|
| 超级管理员 | 所有工单 | 所有筛选条件 |
| 管理层 | 所有工单 | 所有筛选条件 |
| 暖通工程师 | 所有工单 | 默认显示暖通类 |
| 配电工程师 | 所有工单 | 默认显示配电类 |
| 消防工程师 | 所有工单 | 默认显示消防类 |
| 弱电工程师 | 所有工单 | 默认显示弱电类 |
| 巡检员 | 自己报修的 | 基础筛选 |

## 四、巡检管理模块

### 新建巡检

**复制选项**：
- 提示文字："是否复制上次巡检？"
- 复制按钮：点击后自动填充上次所有数据
- 新建按钮：创建空白巡检表单

### 巡检路线（固定顺序，Tab切换）

#### 1楼巡检（22项）

1. 地埋油罐及蓄冷罐是否正常：单选按钮（是/否）
2. 南侧电气间环境设施是否正常：单选按钮（是/否）
3. 高压细水泵房环境及设施是否正常：单选按钮（是/否）
4. 高压油机室是否漏水漏油环境是否正常：单选按钮（是/否）
5. 油箱间最高柴油气体浓度：数字输入框，单位ppm，范围0-999
6. 钢瓶间环境设施及压力表是否正常：单选按钮（是/否）
7. 一楼库房环境是否正常：单选按钮（是/否）
8. 水泵房管道是否漏水设施是否正常：单选按钮（是/否）
9. 冷冻站环境设施是否正常：单选按钮（是/否）
10. 冷冻泵回水压力：数字输入框，单位MPa，范围0-10
11. 冷冻泵出水压力：数字输入框，单位MPa，范围0-10
12. 冷却塔运行状态：单选按钮（正常/异常）
13. 配电室温度：数字输入框，单位℃，范围-10-50
14. 配电室湿度：数字输入框，单位%，范围0-100
15. UPS运行状态：单选按钮（正常/异常）
16. UPS电池组电压：数字输入框，单位V
17. 发电机组状态：单选按钮（正常/待机/故障）
18. 燃油存量：数字输入框，单位L
19. 消防系统状态：单选按钮（正常/异常）
20. 监控系统状态：单选按钮（正常/异常）
21. 门禁系统状态：单选按钮（正常/异常）
22. 其他异常情况：多行文本框，限500字符

#### 2楼巡检（18项）

1. 机房温度：数字输入框，单位℃
2. 机房湿度：数字输入框，单位%
3. 空调运行状态：单选按钮（正常/异常）
4. 精密空调温度设定：数字输入框，单位℃
5. 新风系统状态：单选按钮（正常/异常）
6. 配电柜状态：单选按钮（正常/异常）
7. PDU状态检查：单选按钮（正常/异常）
8. 机柜门锁检查：单选按钮（正常/异常）
9. 机柜指示灯：单选按钮（正常/异常）
10. 地板清洁度：单选按钮（清洁/一般/脏污）
11. 线缆整理情况：单选按钮（整齐/一般/杂乱）
12. 消防烟感状态：单选按钮（正常/异常）
13. 应急照明：单选按钮（正常/异常）
14. 安全出口标识：单选按钮（正常/异常）
15. 监控摄像头：单选按钮（正常/异常）
16. 噪音情况：单选按钮（正常/异常）
17. 异味检查：单选按钮（无/有）
18. 备注：多行文本框，限500字符

#### 3楼巡检（13项）

1. 机房温度：数字输入框，单位℃
2. 机房湿度：数字输入框，单位%
3. 空调运行状态：单选按钮（正常/异常）
4. 配电柜状态：单选按钮（正常/异常）
5. UPS状态：单选按钮（正常/异常）
6. 机柜状态检查：单选按钮（正常/异常）
7. 网络设备状态：单选按钮（正常/异常）
8. 服务器运行状态：单选按钮（正常/异常）
9. 存储设备状态：单选按钮（正常/异常）
10. 备份系统状态：单选按钮（正常/异常）
11. 监控系统：单选按钮（正常/异常）
12. 门禁系统：单选按钮（正常/异常）
13. 备注：多行文本框，限500字符

#### 4楼巡检（3项）

1. **会议室设备检查**：单选按钮（正常/异常）
2. **办公区域环境**：单选按钮（正常/异常）
3. **备注**：多行文本框，限500字符

### 巡检其他信息

- **巡检接力人员**：下拉菜单，显示其他巡检员
- **总体备注**：多行文本框，限1000字符
- **管理层调整表格**
- **拍照上传**：
  - 拍照按钮：调用摄像头
  - 上传按钮：选择本地图片
  - 图片预览：缩略图显示，点击放大
  - 最多20张，每张5MB

### 保存并检查异常

- **保存按钮**：保存巡检记录
- **异常检测**：
  - 自动统计异常项数量
  - 弹窗提示："发现X个异常项，是否生成工单？"
  - 确认按钮：批量生成工单
  - 取消按钮：仅保存不生成
- **工单生成规则**：
  - 标题格式："[巡检异常]X楼-项目名称"
  - 优先级判定：
    - 氢气/消防相关→高优先级（红色）
    - 设备故障→中优先级（黄色）
    - 环境异常→低优先级（绿色）
  - 自动关联巡检记录ID

### 巡检计划管理

- **计划名称**：文本输入框，如"日常巡检"
- **执行频率**：下拉菜单（每日/每周/每月）
- **执行时间**：时间选择器，24小时制
- **执行日期**：
  - 每周：星期选择（一至日），多选
  - 每月：日期选择（1-31号），多选
- **负责人**：下拉菜单，选择巡检员
- **提前提醒**：下拉菜单（15分钟/30分钟/1小时/2小时）
- **启用状态**：开关按钮
- **保存计划**：保存配置

### 巡检列表显示

**表格列**：
- ID：巡检编号
- 异常项数：红色数字显示
- 巡检日期：YYYY-MM-DD
- 巡检人员：显示姓名
- 接力人员：显示姓名
- 复制标记：显示"复制"标签
- 生成工单数：显示数量
- 完成状态：已完成/未完成
- 备注：限50字符显示
- 操作：查看/编辑/导出按钮

## 五、资产管理模块（机房资产可视化台账）

### 资产台账主界面

#### Excel式操作

- **单元格编辑**：双击进入编辑模式
- **快捷键**：
  - Tab：下一个单元格
  - Enter：确认并下移
  - Esc：取消编辑
  - Ctrl+Z：撤销
  - Ctrl+Y：重做
  - Ctrl+C/V：复制粘贴
- **自动保存**：修改后3秒自动保存，右上角显示"已保存"
- **批量操作**：鼠标框选多个单元格，支持批量修改

#### 机柜信息字段（可自定义）

**基础信息**：
- 机柜编号：文本，必填，唯一，如A01-001
- 机柜名称：文本，限100字符
- 所在机房：下拉选择（1楼/2楼/3楼/4楼）
- 所在排列：文本，如A排
- 机柜位置：文本，如A01-B05

**规格参数**：
- 机柜高度：数字，单位U，范围1-52
- 额定功率：数字，单位KW，保留2位小数
- 实际功率：数字，单位KW，保留2位小数
- 剩余空间：数字，单位U，自动计算

**客户信息**：
- 客户名称：文本，限200字符
- 客户联系人：文本，限50字符
- 联系电话：文本，11位手机号
- 合同编号：文本，限100字符

**设备清单**：
- 设备名称：文本，多行显示
- 设备型号：文本
- 占用U数：数字
- 设备序列号：文本
- IP地址段：文本，IP格式校验

**状态信息**：
- 使用状态：下拉（使用中/空闲/预留/维护中/故障）
- 上架日期：日期选择器
- 到期日期：日期选择器
- 维保状态：下拉（正常/待维保/维保中）

**备注**：多行文本，限500字符

### 颜色标识管理

**预设颜色方案**：

**按使用状态**：
- 绿色（#67C23A）：正常使用中
- 黄色（#E6A23C）：即将到期（30天内）
- 红色（#F56C6C）：已到期/故障
- 灰色（#909399）：空闲可用
- 蓝色（#409EFF）：预留/待上架

**按客户着色**：
- 自定义客户颜色
- 支持批量设置

**按功率使用率**：
- 深红：>80%接近满载
- 橙色：60-80%正常使用
- 浅绿：<60%富余较多

**颜色规则配置**：
- 规则优先级：1-10级设置
- 组合条件：支持AND/OR逻辑
- 闪烁提醒：紧急状态闪烁
- 应用范围：整行/单元格

### 快速查找与筛选

- **快速搜索框**：全局模糊搜索，实时显示结果
- **高级筛选器**：
  - 机房楼层：复选框（1楼/2楼/3楼/4楼）
  - 客户名称：文本输入，模糊匹配
  - 使用状态：复选框多选
  - 到期时间：日期范围选择
  - 功率使用率：滑块选择范围
  - 剩余空间：数字范围输入
- **筛选器操作**：
  - 保存筛选：保存为常用筛选
  - 重置筛选：清空所有条件
  - 导出结果：导出筛选后数据

### 数据视图

- **列表视图**：默认Excel表格式
- **卡片视图**：每个机柜一张卡片
- **机房布局图**：2D平面图显示
- **统计视图**：图表统计分析
- **视图切换**：顶部Tab切换
- **自定义列**：
  - 显示/隐藏列
  - 调整列宽
  - 固定列
  - 保存视图配置

### 批量导入导出

**Excel导入**：
- 模板下载：提供标准Excel模板
- 文件上传：拖拽或选择文件
- 字段映射：自动识别或手动映射
- 预览确认：显示前10条数据
- 错误提示：标记错误行列
- 导入模式：增量更新/全量替换

**数据导出**：
- 导出格式：Excel/PDF/CSV
- 导出范围：当前页/全部数据
- 包含内容：选择导出字段
- 保留样式：颜色/格式

### 编辑与版本控制

**在线编辑**：
- 单元格验证：实时格式校验
- 下拉选择：预设值快速选择
- 日期选择：日历控件
- 自动完成：历史输入提示

**版本控制**：
- 修改历史：记录每次修改
- 版本对比：显示差异内容
- 历史回滚：恢复到指定版本
- 操作日志：谁在何时修改了什么

### 提醒与预警

**自动提醒**：
- 到期提醒：30/15/7/3/1天分级提醒
- 功率告警：超过80%立即通知
- 空间不足：剩余<5U提醒
- 数据异常：必填项为空提醒

**提醒方式**：
- 系统消息：消息中心显示
- 邮件通知：发送到邮箱
- 首页预警：仪表板展示
- 列表标记：红色高亮显示

### 统计报表

- **使用率统计**：机柜使用率饼图
- **客户分布**：客户资产分布图
- **到期提醒表**：即将到期列表
- **功率分析**：功率使用趋势图
- **空间分析**：剩余空间统计

## 六、知识库模块

### 新建/编辑知识条目

- **标题**：文本输入框，必填，限200字符
- **分类**：下拉选择（故障处理/操作指南/经验分享/规范制度/常见问题）
- **标签**：标签输入框，支持多个，回车添加，最多10个
- **内容**：富文本编辑器
  - 支持标题样式
  - 支持代码高亮
  - 支持表格插入
  - 支持图片上传
- **附件**：
  - 图片上传：多图上传，支持预览，单张5MB
  - 视频上传：本地视频或视频链接，单个50MB
  - 文档上传：PDF/Word/Excel，单个10MB
  - 附件列表：显示已上传文件，可删除
- **保存草稿**：暂存不发布
- **发布按钮**：正式发布

### 6.2 知识库列表显示

**表格列**：
- ID：知识编号
- 标题：限50字显示，悬停全显
- 分类：显示分类名称
- 标签：显示所有标签
- 查看次数：累计查看数
- 解决次数：标记解决数
- 解决率：百分比显示
- 多媒体：图标显示有无附件
- 作者：创建人姓名
- 更新时间：最后修改时间
- 操作：查看/编辑/删除按钮

### 6.3 查看知识条目

**内容展示**：
- 标题显示
- 标签展示
- 正文内容
- 附件下载

**图片处理**：
- 点击放大
- 支持缩放
- 幻灯片播放

**视频播放**：
- 内嵌播放器
- 支持全屏

**反馈功能**：
- 问题："这篇文章解决了您的问题吗？"
- 按钮：是/否
- 统计显示："已有XX人觉得有用"
- 评论功能：可留言反馈

### 6.4 知识库搜索

- **搜索框**：全文搜索，支持标题+内容
- **标签云**：热门标签展示，点击筛选
- **分类筛选**：按分类筛选
- **排序方式**：
  - 最新发布
  - 最多查看
  - 解决率最高
  - 最多收藏
- **搜索建议**：输入时显示相关条目

## 七、审批中心

### 7.1 触发审批的操作

- 删除用户账号
- 删除资产记录
- 删除知识库文章
- 清空操作日志
- 修改系统设置
- 批量数据导入（>100条）

### 7.2 申请表单

- **申请类型**：自动填充，如"删除用户"
- **申请对象**：自动填充，如用户名/资产编号
- **申请理由**：多行文本框，必填，限500字符
- **紧急程度**：下拉选择（一般/紧急/特急）
- **附件上传**：支持上传相关文件
- **提交申请**：提交到审批队列

### 7.3 审批中心（仅管理员可见）

**列表显示**：
- 申请ID：自增编号
- 申请类型：操作类型
- 申请对象：具体对象
- 申请人：申请人姓名
- 申请理由：限100字显示
- 申请时间：YYYY-MM-DD HH:MM
- 紧急程度：一般/紧急/特急
- 状态：待审批（黄）/已批准（绿）/已拒绝（红）
- 操作：批准/拒绝/查看详情按钮

### 7.4 审批处理

**批准操作**：
- 点击批准按钮
- 确认弹窗
- 执行删除操作
- 更新状态为已批准
- 通知申请人

**拒绝操作**：
- 点击拒绝按钮
- 拒绝理由：文本输入框，选填
- 确认拒绝
- 更新状态为已拒绝
- 通知申请人

### 7.5 审批超时处理

- **24小时未处理**：系统提醒审批人
- **48小时未处理**：系统提醒审批人

## 八、统计分析模块

### 8.1 设备故障统计

**统计维度选择**：
- 时间范围：日期范围选择器
- 统计类型：单选按钮
  - 按专业统计
  - 按设备统计
  - 按楼层统计
  - 按优先级统计

**图表展示**：
- 柱状图：故障数量
- 饼图：故障分布
- 折线图：趋势分析

**数据表格**：详细数据列表

### 8.2 导出功能

- **导出格式**：下拉菜单（Excel/PDF）
- **包含内容**：复选框
  - 详细数据表
  - 统计图表
  - 分析说明
  - 操作建议
- **时间范围**：选择导出数据范围
- **导出按钮**：生成并下载文件

### 8.3 运维月报（自动生成）

**工单统计**：
- 本月新增/完成/积压
- 优先级分布图
- 专业分类统计
- 平均处理时长
- 超时率分析

**巡检分析**：
- 巡检完成率
- 异常TOP10
- 异常趋势图
- 楼层问题分布

**人员绩效**：
- 工单处理排名
- 响应时间统计
- 巡检完成情况

## 九、通知中心

### 9.1 发布通知（管理员/工程师）

- **通知类型**：下拉菜单（系统公告/维护通知/紧急通知）
- **标题**：文本输入框，必填，限100字符
- **内容**：文本编辑器，限500字符
- **接收人**：
  - 全体用户：单选按钮
  - 指定角色：复选框（管理员/工程师/巡检员）
  - 指定用户：多选下拉框
- **要求确认阅读**：复选框，勾选后必须确认已读
- **阅读时限**：数字输入框，单位小时（选填，超时未读会标红提醒）
- **置顶**：复选框，是否置顶显示
- **有效期**：日期范围选择
- **发布按钮**：立即发布
- **定时发布**：选择发布时间

### 9.2 通知列表（普通用户视图）

**表格显示**：
- ID：通知编号
- 类型：公告/维护/紧急
- 标题：通知标题
- 内容摘要：限100字显示
- 发布人：发布人姓名
- 发布时间：YYYY-MM-DD HH:MM
- 已读状态：已读（绿色）/未读（红色加粗）
- 操作：查看/标记已读/归档

### 9.3 通知阅读状态管理（管理层专属功能）

#### 9.3.1 阅读统计概览

**统计卡片**（显示在通知详情页顶部）：
- 应收人数：XX人
- 已读人数：XX人（绿色）
- 未读人数：XX人（红色）
- 阅读率：XX%（进度条显示）
- 平均阅读时长：XX分钟

#### 9.3.2 阅读详情列表

**查看入口**：通知列表操作栏增加"查看阅读情况"按钮（仅管理层可见）

**详情表格**：
- 用户姓名：接收人姓名
- 部门：所属部门
- 角色：用户角色
- 阅读状态：
  - 已读（绿色√）
  - 未读（红色×）
  - 已确认（蓝色√√）仅要求确认的通知
- 首次阅读时间：YYYY-MM-DD HH:MM:SS
- 阅读次数：查看次数统计
- 阅读时长：停留时间（秒）
- 最后查看时间：最近一次查看时间
- 设备信息：PC/移动端
- IP地址：查看时的IP

#### 9.3.3 未读人员管理

**筛选功能**：
- 按部门筛选未读人员
- 按角色筛选未读人员
- 按时间筛选（超过X小时未读）

**批量操作**：
- 批量提醒：发送系统消息提醒
- 邮件提醒：发送邮件提醒未读人员
- 导出名单：导出未读人员Excel

#### 9.3.4 阅读追踪功能

**实时更新**：阅读状态实时刷新

**阅读轨迹**：
- 记录每次打开时间
- 记录停留时长
- 记录是否滚动到底部

**超时提醒**：
- 设定时限内未读自动标红
- 系统自动提醒管理员
- 可设置多级提醒

## 十、消息中心

### 10.1 消息分类

#### 待办事项

- **待审批项**：显示数量，仅管理员可见
- **待执行维保计划**：显示数量和标题
- **待处理工单**：显示数量和优先级
- **待完成巡检**：显示今日巡检任务

#### 提醒事项

- **即将到期任务**：24小时内到期，橙色显示
- **即将到期资产**：30天内到期
- **巡检计划提醒**：提前X分钟提醒
- **维保计划提醒**：提前1天提醒

#### 超时警告

- **超时工单**：红色显示，闪烁提醒
- **逾期维保计划**：显示逾期天数
- **未完成巡检**：显示应完成时间

#### 系统通知

- **未读通知列表**：按时间倒序
- **公告通知**：置顶显示
- **系统消息**：系统自动消息

### 10.2 消息显示格式

- **消息类型图标**：不同类型不同图标
- **标题**：消息标题
- **时间**：相对时间（刚刚/5分钟前/昨天）
- **快捷操作**：处理/查看/忽略按钮

## 十一、报表模块

### 11.1 报表类型选择

**运维报表**：
- 工单统计
- 完成率分析
- 处理时长统计
- 人员工作量

**巡检报表**：
- 巡检完成率
- 异常分析
- 趋势对比

**资产报表**：
- 资产使用率
- 到期提醒
- 客户分布

**综合报表**：
- 全面数据汇总
- KPI指标分析

### 11.2 报表生成

- **报表周期**：下拉菜单（日报/周报/月报/季报/年报）
- **时间范围**：日期范围选择器
- **部门选择**：全部/指定部门
- **包含内容**：复选框选择
- **生成报表**：在线预览
- **下载报表**：Excel/PDF格式

### 11.3 管理主页（首页大屏）（待定）

**实时数据**：
- 今日工单处理进度条
- 设备运行状态图
- 人员在岗情况
- 告警信息滚动

**趋势分析**：
- 30天工单趋势线
- 故障类型分布饼图
- 维保执行率柱状图

## 十二、用户管理

### 12.1 用户列表

**表格显示**：
- 用户名：登录账号
- 姓名：真实姓名
- 角色：角色名称
- 手机号：11位手机号
- 邮箱：邮箱地址
- 职位：所属职位
- 创建时间：注册时间
- 最后登录：最近登录时间
- 状态：启用（绿）/禁用（红）
- 操作：编辑/重置密码/删除/禁用按钮

### 12.2 新增用户

- **用户名**：文本输入框，4-20字符，唯一性校验
- **姓名**：文本输入框，2-20字符
- **初始密码**：密码输入框，默认123456
- **确认密码**：密码输入框
- **角色**：下拉菜单选择
- **部门**：下拉菜单选择
- **手机号**：文本输入框，11位
- **邮箱**：邮箱输入框
- **状态**：单选按钮（启用/禁用）
- **保存按钮**：创建用户

### 12.3 编辑用户

- **用户名**：只读显示
- **姓名**：可修改
- **密码**：选填，不填则不修改
- **角色**：可修改
- **部门**：可修改
- **手机号**：可修改
- **邮箱**：可修改
- **状态**：可修改
- **保存按钮**：更新信息

### 12.4 批量操作

- **批量导入**：Excel模板导入
- **批量禁用**：批量禁用账号
- **批量删除**：批量删除用户
- **批量重置密码**：重置为默认密码

## 十三、操作日志

### 13.1 日志筛选

- **操作人**：下拉菜单，选择用户
- **操作模块**：下拉菜单（用户管理/工单管理/巡检管理等）
- **操作类型**：下拉菜单（新增/修改/删除/查询）
- **时间范围**：日期范围选择器
- **IP地址**：文本输入框
- **查询按钮**：执行筛选

### 13.2 日志列表（按月分组显示）

**表格列**：
- 时间：YYYY-MM-DD HH:MM:SS
- 操作人：用户姓名
- IP地址：操作IP
- 操作模块：模块名称
- 操作类型：增删改查
- 操作对象：具体对象ID
- 操作详情：具体操作内容
- 操作结果：成功/失败
- 耗时：操作耗时ms

### 13.3 日志详情（JSON格式）

```json
{
  "timestamp": "2024-01-15 10:23:45",
  "user": "admin",
  "ip": "192.168.1.100",
  "module": "工单管理",
  "action": "UPDATE",
  "target": "TICKET#001",
  "before": {"status": "新建", "priority": "低"},
  "after": {"status": "处理中", "priority": "中"},
  "result": "SUCCESS",
  "duration": 123
}
```

### 13.4 日志操作

- **导出日志**：导出为Excel文件
- **归档日志**：6个月前的日志自动归档
- **清空日志**：需审批，仅超级管理员

## 十四、标签管理

### 14.1 标签列表

**表格显示**：
- 标签名：标签名称
- 标签颜色：颜色块显示
- 使用次数：被引用次数
- 所属模块：工单/知识库等
- 创建人：创建人姓名
- 创建时间：YYYY-MM-DD
- 操作：编辑/合并/删除按钮

### 14.2 新增标签

- **标签名**：文本输入框，限20字符
- **标签颜色**：颜色选择器
- **所属模块**：复选框（工单/知识库/资产）
- **描述**：文本框，限100字符
- **保存按钮**：创建标签

### 14.3 批量操作

- **批量选择**：复选框全选
- **合并标签**：选择多个合并到目标标签
- **批量删除**：批量删除未使用标签
- **批量修改颜色**：统一修改颜色

## 十五、全局导航栏

### 15.1 导航菜单（左侧或顶部）

1. **首页**：仪表板
2. **维保计划**：`<徽章显示待执行数>`
3. **工单**：`<徽章显示未完成数>`
4. **巡检**：`<徽章显示今日待检>`
5. **资产**：`<徽章显示即将到期数>`
6. **通知**：`<徽章显示未读数>`
7. **知识库**：无徽章
8. **消息中心**：`<徽章显示待处理总数>`
9. **报表**：无徽章
10. **审批中心**：`<徽章显示待审批数>`（仅管理员可见）
11. **用户管理**：（仅管理员可见）
12. **操作日志**：（仅管理员可见）
13. **标签管理**：（仅管理员可见）
14. **系统设置**：（仅超级管理员可见）

### 15.2 用户信息区（右上角）

- **用户头像**：圆形头像，点击展开菜单
- **用户名**：显示当前用户名
- **角色标识**：显示角色名称
- **下拉菜单**：
  - 个人中心
  - 修改密码
  - 权限代理
  - 退出登录

### 15.3 快捷操作栏

- **全屏按钮**：F11全屏切换
- **消息图标**：显示未读消息数
- **刷新按钮**：刷新当前页面
- **帮助按钮**：操作指南

## 十六、首页看板

### 16.1 今日概览（顶部卡片）

- **待处理工单**：XX件，点击跳转
- **今日巡检**：XX次，显示完成率
- **在线用户**：XX人，显示列表
- **系统运行**：XX天，显示稳定率

### 16.2 快捷入口（大图标按钮）

- **快速报修**：跳转新建工单
- **开始巡检**：跳转巡检页面
- **查看工单**：跳转工单列表
- **知识搜索**：跳转知识库

### 16.3 待办事项（列表显示）

- **显示内容**：
  - 待办类型图标
  - 待办事项标题
  - 紧急程度标记
  - 剩余时间
  - 快速处理按钮
- **显示数量**：最近5条
- **查看全部**：链接到消息中心

### 16.4 公告栏

- **显示方式**：滚动显示最新公告
- **公告内容**：标题+发布时间
- **查看详情**：点击查看完整内容

### 16.5 数据统计（图表展示）

- **本月工单统计**：柱状图
- **巡检完成率**：环形图
- **故障分布**：饼图
- **趋势分析**：折线图

## 十七、系统设置（仅超级管理员）

### 17.1 基础设置

- **系统名称**：文本输入框，限50字符
- **系统LOGO**：图片上传，限2MB，建议200×50px
- **登录页背景**：图片上传，限5MB，建议1920×1080px
- **系统主题**：颜色选择器，选择主题色
- **版权信息**：文本输入框，限200字符
- **保存设置**：保存所有修改

### 17.2 工单设置

- **超时时限设置**：
  - 高优先级：数字输入框，单位小时，默认12
  - 中优先级：数字输入框，单位小时，默认24
  - 低优先级：数字输入框，单位小时，默认48
- **自动升级**：开关按钮，是否启用自动升级
- **升级间隔**：数字输入框，检查间隔小时数
- **工单编号规则**：文本输入，如W-{YYYY}{MM}{DD}-{0000}

### 17.3 通知设置

- 工单超时通知：开关
- 巡检提醒：开关
- 维保提醒：开关
- 审批提醒：开关

### 17.4 备份设置

- **自动备份**：开关按钮
- **备份时间**：时间选择器，如每天02:00
- **备份保留天数**：数字输入，默认30天
- **备份路径**：文本显示，系统自动设置
- **手动备份**：立即备份按钮

### 17.5 安全设置

**密码策略**：
- 最小长度：数字输入，默认8
- 必须包含：复选框（大写/小写/数字）
- 密码有效期：365天

**登录设置**：
- 失败锁定次数：数字输入，默认5
- 锁定时长：数字输入，单位分钟
- 会话超时：数字输入，单位分钟

**IP白名单**：文本框，每行一个IP

## 十八、数据权限规则

### 18.1 数据隔离原则

- **普通用户**：只能看到自己相关的数据
- **管理员**：可以查看所有数据
- **工程师**：可查看所有工单，只能修改指派给自己的
- **巡检员**：只能查看和修改自己的巡检记录

### 18.2 操作权限控制

- **创建权限**：根据角色矩阵控制
- **修改权限**：创建者和管理员可修改
- **删除权限**：需要审批流程
- **查看权限**：根据数据隔离原则

## 十九、业务流程说明

### 19.1 工单处理流程

1. 用户报修 → 创建工单（状态：新建）
2. 系统自动设置处理时限
3. 管理员指派工程师（状态：处理中）
4. 工程师处理问题
5. 完成后更新状态（状态：已完成）
6. 超时自动升级/告警
7. 用户确认（状态：已关闭）

### 19.2 巡检流程

1. 系统按计划提醒巡检
2. 巡检员执行巡检
3. 填写巡检表单
4. 发现异常自动生成工单
5. 巡检完成存档
6. 生成巡检报告

### 19.3 维保流程

1. 创建维保计划
2. 提交审核人审批
3. 审批通过后生效
4. 到期提醒执行
5. 执行并记录结果
6. 自动生成下期计划

### 19.4 审批流程

1. 用户发起审批申请
2. 系统通知审批人
3. 审批人处理（批准/拒绝）
4. 系统执行相应操作
5. 通知申请人结果

## 二十、系统集成接口

### 20.1 数据导入导出

**Excel批量导入**：
- 用户数据导入
- 资产数据导入
- 设备清单导入

**数据导出**：
- JSON格式导出
- CSV格式导出
- Excel格式导出

**模板下载**：
- 提供各模块标准模板

### 20.2 第三方对接（预留接口）

- 监控系统：接收告警信息
- OA系统：用户同步
- 财务系统：费用对接
- 短信平台：短信通知

## 二十一、数据保留与备份

### 21.1 数据保留策略

| 数据类型 | 保留时长 | 归档策略 |
|---------|---------|----------|
| 操作日志 | 6个月 | 自动归档 |
| 工单记录 | 永久 | 不归档 |
| 巡检记录 | 1年 | 可导出备份 |
| 维保记录 | 永久 | 不归档 |
| 临时文件 | 7天 | 自动清理 |
| 已删除数据 | 3个月 | 软删除 |

### 21.2 备份策略

**数据库备份**：
- 全量备份：每天凌晨2点
- 增量备份：每4小时
- 备份保留：本地7天，云端30天

**文件备份**：
- 图片文件：实时同步OSS
- 文档文件：每天增量备份

**备份验证**：每周恢复测试

### 21.3 数据恢复

- **恢复范围**：30天内任意时间点
- **恢复粒度**：全库恢复/表级恢复/记录级恢复
- **恢复权限**：仅超级管理员
- **恢复日志**：详细记录恢复操作

## 二十二、并发与冲突处理

### 22.1 并发编辑处理

- **锁机制**：乐观锁，基于版本号（假设多用户并发操作时冲突概率较小，不会立即锁定数据，而是在更新时检查数据是否被其他用户修改过）
- **冲突检测**：提交时检查版本
- **冲突提示**："数据已被[用户名]修改"
- **解决选项**：
  - 覆盖其他修改
  - 放弃本次修改
  - 查看差异对比
  - 合并修改（仅文本）
- **实时提示**："XX正在编辑此记录"

### 22.2 批量操作冲突

- **事务处理**：批量操作使用事务
- **失败回滚**：任一失败全部回滚
- **错误提示**：具体到失败记录
- **重试机制**：支持重新执行

## 二十三、异常处理机制

### 23.1 网络异常处理

- **自动保存**：每30秒保存草稿到本地
- **离线缓存**：LocalStorage存储未提交数据
- **断线重连**：每10秒尝试重连
- **恢复提示**："网络已恢复，是否提交暂存数据？"

### 23.2 系统异常处理

- **错误捕获**：全局错误处理
- **友好提示**：非技术性错误描述
- **错误上报**：自动上报错误日志
- **降级方案**：核心功能保证可用

### 23.3 数据异常处理

- **数据校验**：前后端双重校验
- **格式检查**：实时格式验证
- **范围检查**：数值范围验证
- **关联检查**：外键关联验证

## 二十四、搜索功能规范

### 24.1 搜索策略

**模糊搜索**：
- 标题/名称：前后模糊匹配
- 描述/内容：全文检索

**精确搜索**：
- ID/编号：完全匹配
- 状态/类型：精确匹配

**范围搜索**：
- 时间：起止时间
- 数值：最小最大值

### 24.2 搜索优化

- **分词处理**：空格自动分词
- **拼音搜索**：支持首字母
- **搜索建议**：实时提示
- **历史记录**：保存10条
- **热门搜索**：显示高频词

### 24.3 搜索结果

- **结果高亮**：关键词高亮
- **结果排序**：相关度/时间/热度
- **分页显示**：20/50/100条
- **导出结果**：支持导出

## 二十五、监控告警

### 25.1 系统监控指标

| 监控项 | 正常值 | 警告阈值 | 严重阈值 |
|--------|--------|---------|----------|
| CPU使用率 | <60% | >80% | >90% |
| 内存使用率 | <70% | >85% | >95% |
| 磁盘使用率 | <80% | >90% | >95% |
| 响应时间 | <3秒 | >5秒 | >10秒 |
| 错误率 | <0.1% | >1% | >5% |

### 25.2 业务监控指标

- **工单超时数**：实时监控
- **巡检完成率**：日统计
- **登录失败率**：小时统计
- **接口调用量**：实时统计

### 25.3 告警通知

- **告警级别**：提示/警告/严重
- **通知方式**：
  - 系统内通知
  - 邮件通知
  - 短信通知（严重）
- **告警记录**：保存所有告警

## 附录

### 附录A：字段长度限制汇总

| 模块 | 字段 | 长度限制 | 备注 |
|------|------|---------|------|
| 通用 | 标题 | 200字符 | 所有模块标题 |
| 通用 | 描述 | 5000字符 | 详细描述 |
| 通用 | 备注 | 2000字符 | 备注说明 |
| 用户 | 用户名 | 4-20字符 | 字母数字下划线 |
| 用户 | 密码 | 8-20字符 | 复杂度要求 |
| 用户 | 姓名 | 2-20字符 | 中英文 |
| 工单 | 工单号 | 自动生成 | W-YYYYMMDD-0000 |
| 资产 | 机柜编号 | 50字符 | 唯一标识 |
| 知识库 | 标签 | 20字符/个 | 最多10个 |

### 附录B：状态码与枚举值

#### 工单状态
- new：新建
- processing：处理中
- completed：已完成
- closed：已关闭
- cancelled：已取消

#### 优先级
- low：低（24小时）
- medium：中（8小时）
- high：高（4小时）
- urgent：紧急（2小时）

#### 用户状态
- active：启用
- disabled：禁用
- locked：锁定

#### 审批状态
- pending：待审批
- approved：已批准
- rejected：已拒绝

### 附录C：错误提示信息

| 错误码 | 错误信息 | 用户提示 |
|--------|---------|----------|
| E1001 | 用户名或密码错误 | 请检查您的用户名和密码 |
| E1002 | 账号已被锁定 | 您的账号已被锁定，请联系管理员 |
| E1003 | 会话已过期 | 登录已过期，请重新登录 |
| E2001 | 必填项为空 | 请填写所有必填项 |
| E2002 | 数据格式错误 | 请检查输入格式 |
| E2003 | 数据已被修改 | 数据已被其他用户修改，请刷新后重试 |
| E3001 | 文件太大 | 文件大小超过限制 |
| E3002 | 文件格式不支持 | 不支持该文件格式 |
| E4001 | 无权限操作 | 您没有权限执行此操作 |
| E5001 | 服务器错误 | 服务器繁忙，请稍后重试 |