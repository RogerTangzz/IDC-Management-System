IDC管理系统 - Phase 1.2 & Phase 1.1 功能测试指南
📌 测试环境准备
前置条件：
✅ 前端服务：http://localhost:81/
✅ 后端服务：需重启（已修改Java文件）
✅ 数据库：MySQL (idc_clean)
✅ 测试账号：管理员账号
测试数据：
117个机柜
4,931条U位记录
biz_asset_rack_log 表已创建
🧪 Phase 1.2 - U位管理功能测试
测试目标：
验证U位的分配、释放、冲突检测、统计查询功能
测试用例 1.2.1：访问机柜详情页
步骤：
访问 http://localhost:81/
使用管理员账号登录
导航到：IDC运维管理 → 资产管理 → 机柜使用
点击任意机柜行的"操作"列 → "详情"
预期结果：
✅ 页面跳转成功
✅ URL格式：/business/asset/rack/detail/{rackId}
✅ 页面显示机柜详情页
✅ 无控制台错误
实际结果： ___________
测试用例 1.2.2：U位可视化网格显示
检查点：
 U位网格显示正确（例如42个格子）
 每个U位显示编号（U1, U2, U3...）
 空闲U位：绿色边框 + 浅蓝背景
 已占用U位：红色边框 + 浅红背景（如果有）
 已占用U位显示设备名称
 图例正确显示（空闲/已占用/预留/禁用）
实际结果： ___________
测试用例 1.2.3：容量统计显示
检查点：
 总U数显示正确（例如：42U）
 已用U数显示正确（根据实际占用）
 剩余U数显示正确
 数字准确性：总U数 = 已用U数 + 剩余U数
实际结果： ___________
测试用例 1.2.4：冲突检测功能
测试步骤：
切换到"分配U位"标签
填写：
起始U位：1
占用U数：3
点击"检查冲突"按钮
预期结果：
✅ 如果U1-U3空闲：提示"无冲突，可以分配"
✅ 如果U1-U3已占用：提示"存在冲突"
实际结果： ___________
测试用例 1.2.5：U位分配功能（核心）
测试数据：
起始U位：10
占用U数：5
设备名称：测试服务器-001
设备类型：刀片服务器
测试步骤：
填写上述数据
点击"检查冲突" → 确认无冲突
点击"分配"按钮
预期结果：
✅ 提示"分配成功"
✅ U位网格自动刷新
✅ U10-U14 变为红色（已占用）
✅ U10-U14 显示设备名称"测试服务器-001"
✅ 已用U数统计 +5
✅ 剩余U数统计 -5
实际结果： ___________
测试用例 1.2.6：U位点击详情
测试步骤：
点击已占用的U位（例如U10）
预期结果：
✅ 弹出对话框
✅ 显示：U10 - 已占用
✅ 显示：设备: 测试服务器-001
✅ 显示：类型: 刀片服务器
实际结果： ___________
测试用例 1.2.7：U位释放功能
测试数据：
起始U位：10
释放U数：3
测试步骤：
切换到"释放U位"标签
填写上述数据
点击"释放"按钮
预期结果：
✅ 提示"释放成功"
✅ U位网格自动刷新
✅ U10-U12 变回绿色（空闲）
✅ U13-U14 仍然是红色（部分释放）
✅ 已用U数统计 -3
✅ 剩余U数统计 +3
实际结果： ___________
测试用例 1.2.8：边界条件测试
子测试 A：占用0个U位
输入：起始U=1, 占用U数=0
预期：提示"参数错误"
子测试 B：起始U位超出范围
输入：起始U=99, 占用U数=5
预期：允许输入，但可能超出范围（取决于机柜总U数）
子测试 C：重复分配
步骤：对同一U位范围分配两次
预期：第二次提示"存在冲突"
实际结果： ___________
🎨 Phase 1.1 - 详情页增强功能测试
测试目标：
验证基本信息卡片、ECharts饼图、变更历史时间轴功能
测试用例 1.1.1：页面头部检查
检查点：
 显示"机柜详情 - [机柜编号]"
 有"返回"按钮（左侧箭头）
 有"编辑"按钮（右上角蓝色按钮）
 点击"返回"能返回列表页
实际结果： ___________
测试用例 1.1.2：基本信息卡片
检查点（左上角卡片）：
 机柜编号：显示正确
 机柜名称：显示正确
 楼层：显示正确
 房间/区域：显示正确
 具体位置：显示正确
 状态：显示彩色标签（绿色/橙色/红色等）
 创建时间：格式正确（yyyy-MM-dd HH:mm:ss）
 更新时间：格式正确
实际结果： ___________
测试用例 1.1.3：容量信息卡片（含ECharts）
检查点（右上角卡片）：
 总U数：数字正确
 已用U数：数字正确
 剩余U数：数字正确
 ECharts环形饼图渲染成功
 饼图中心显示占用率百分比（例如：4.8%）
 饼图颜色：红色=已占用，绿色=空闲
 鼠标悬停饼图显示tooltip
 tooltip内容：已占用: XXU (XX%)
实际结果： ___________ 截图： （建议截图保存饼图显示）
测试用例 1.1.4：电力与网络卡片
检查点（第二行卡片）：
 额定功率：显示正确（单位：kW）
 网络端口数：显示正确
 备注：显示正确
实际结果： ___________
测试用例 1.1.5：变更历史卡片（空状态）
测试步骤：
滚动到页面底部
查看"变更历史"卡片
预期结果（如果是新机柜）：
✅ 显示"暂无变更记录"
✅ 空状态图标正确
实际结果： ___________
测试用例 1.1.6：变更历史 - U位分配记录（重要）
测试步骤：
执行一次U位分配（参考测试用例 1.2.5）
起始U位：20
占用U数：6
设备名称：存储阵列-002
设备类型：存储设备
分配成功后，刷新页面或点击"变更历史"的刷新按钮
查看"变更历史"卡片
预期结果：
✅ 出现1条新记录
✅ 操作描述："分配U位: U20-U25 (6个U位) 给设备 [存储阵列-002]"
✅ 操作类型：蓝色标签显示"U位分配"
✅ 操作人：显示当前登录用户名
✅ 操作时间：显示当前时间（格式：yyyy-MM-dd HH:mm:ss）
✅ 记录在时间轴最上方（最新的在顶部）
实际结果： ___________ 截图： （建议截图保存变更历史显示）
测试用例 1.1.7：变更历史 - U位释放记录
测试步骤：
执行一次U位释放
起始U位：20
释放U数：3
查看"变更历史"卡片
预期结果：
✅ 出现第2条新记录
✅ 操作描述："释放U位: U20-U22 (3个U位)"
✅ 操作类型：灰色标签显示"U位释放"
✅ 操作人：显示当前登录用户名
✅ 记录在第一条之上（最新的）
实际结果： ___________
测试用例 1.1.8：ECharts动态更新测试
测试步骤：
记录当前饼图显示的占用率（例如：10.5%）
执行U位分配（例如：分配5个U位）
观察饼图变化
预期结果：
✅ 饼图自动刷新
✅ 占用率增加（例如：从10.5% → 22.0%）
✅ 红色区域变大
✅ 绿色区域变小
✅ 中心百分比数字更新
实际结果： ___________
测试用例 1.1.9：变更历史刷新功能
测试步骤：
点击"变更历史"卡片的"刷新"按钮
预期结果：
✅ 显示loading状态
✅ 重新加载历史记录
✅ 记录数量正确
✅ 无报错
实际结果： ___________
测试用例 1.1.10：多次操作的历史记录测试
测试步骤：
执行以下操作序列：
操作1：分配 U30-U32 (3U)
操作2：分配 U35-U39 (5U)
操作3：释放 U30-U31 (2U)
操作4：分配 U40-U40 (1U)
查看变更历史
预期结果：
✅ 显示4条记录
✅ 顺序正确（最新的在最上面）
✅ 每条记录的操作描述准确
✅ 操作类型标签颜色正确（分配=蓝色，释放=灰色）
✅ 时间递减排序
实际结果： ___________
🔍 综合集成测试
测试用例 INT.1：完整业务流程
场景：新设备上架流程 步骤：
进入机柜详情页
检查可用U位（查看绿色格子）
分配U位给新设备：
起始U=15, 占用=10U
设备名称：Web服务器集群-01
设备类型：服务器
验证U位网格变化
验证统计数据变化
验证ECharts饼图变化
验证变更历史新增记录
点击已分配的U位查看详情
过一段时间后释放部分U位（起始U=15, 释放=5U）
再次验证所有显示
预期结果：
✅ 整个流程顺畅无卡顿
✅ 所有数据实时同步
✅ 变更历史完整记录2次操作
✅ 无JavaScript错误
✅ 无网络请求失败
实际结果： ___________
测试用例 INT.2：多机柜测试
步骤：
返回机柜列表
选择另一个机柜进入详情
执行U位分配
检查变更历史
预期结果：
✅ 每个机柜的U位数据独立
✅ 每个机柜的变更历史独立
✅ 不同机柜间数据不会混淆
实际结果： ___________
🐛 异常场景测试
测试用例 ERR.1：网络异常
步骤：
停止后端服务
刷新详情页
预期结果：
✅ 显示友好的错误提示
✅ 不会白屏
✅ 控制台有清晰的错误信息
实际结果： ___________
测试用例 ERR.2：并发操作
步骤：
打开两个浏览器标签，访问同一机柜详情
在标签A分配U10-U15
在标签B也尝试分配U12-U18（有重叠）
预期结果：
✅ 标签A分配成功
✅ 标签B提示冲突或分配失败
✅ 数据库数据一致
实际结果： ___________
📊 性能测试
测试用例 PERF.1：页面加载性能
检查点：
 详情页首次加载时间 < 2秒
 U位网格渲染时间 < 500ms
 ECharts饼图渲染时间 < 300ms
 变更历史加载时间 < 1秒
实际结果： ___________
📝 测试记录表
测试环境信息：
测试日期：__________
测试人员：__________
前端版本：Vite 6.3.5
后端版本：Spring Boot 2.5.15
浏览器：__________
操作系统：__________
测试统计：
Phase 1.2 测试用例总数：8
Phase 1.2 通过数量：____
Phase 1.2 失败数量：____

Phase 1.1 测试用例总数：10
Phase 1.1 通过数量：____
Phase 1.1 失败数量：____

综合测试用例总数：2
综合测试通过数量：____
综合测试失败数量：____

异常测试用例总数：2
异常测试通过数量：____
异常测试失败数量：____

总通过率：_____% 
🔧 常见问题排查
问题1：变更历史一直显示"暂无变更记录"
可能原因：
后端未重启，日志Service未生效
日志记录方法未被调用
数据库连接问题
排查步骤：
检查后端控制台是否有错误
检查数据库表 biz_asset_rack_log 是否有数据
浏览器F12查看网络请求是否成功
检查后端日志是否有SQL错误
问题2：ECharts饼图不显示
可能原因：
ECharts未正确导入
chartContainer ref未绑定
统计数据为空
排查步骤：
浏览器控制台查看是否有ECharts相关错误
检查 uSlotStats 数据是否正确加载
检查DOM中是否有 ref="chartContainer" 元素
问题3：U位分配后网格未刷新
可能原因：
loadUSlots未被调用
响应式数据未更新
排查步骤：
检查 handleAllocate 方法中是否调用了 await loadUSlots()
检查Vue DevTools中 uSlotsList 数据是否更新
✅ 测试完成标准
Phase 1.2 完成标准：
 所有8个测试用例通过
 U位分配、释放功能正常
 统计数据准确
 无严重Bug
Phase 1.1 完成标准：
 所有10个测试用例通过
 基本信息、容量、电力卡片显示正常
 ECharts饼图正常渲染 ⭐
 变更历史正常记录和显示 ⭐
 无严重Bug
整体验收标准：
 总通过率 ≥ 95%
 无阻塞性Bug
 性能符合要求
 用户体验良好
📸 建议截图位置
机柜列表页
机柜详情页（完整页面）
U位可视化网格（空闲状态）
U位可视化网格（部分占用状态）
ECharts饼图 ⭐
变更历史时间轴（有记录时） ⭐
U位分配成功提示
U位释放成功提示
冲突检测提示
点击U位详情弹框
🚀 准备开始测试
测试前检查清单：
 后端已重启
 前端运行正常（http://localhost:81/）
 数据库连接正常
 浏览器DevTools已打开（F12）
 准备好测试账号
 准备好记录测试结果