M3ã€Œå·¡æ£€å®Œå–„ã€æ·±åº¦åˆ†æä¸ä¼˜åŒ–è§„åˆ’
ğŸ“Š ä¸€ã€M3åŸå§‹è§„åˆ’çš„æ·±åº¦è¯„ä¼°
1.1 âœ… åˆç†æ€§åˆ†æ
ç»è¿‡ä»”ç»†å®¡æŸ¥ç°æœ‰ä»£ç å’Œæ–‡æ¡£,æˆ‘å‘ç°M3è§„åˆ’å­˜åœ¨å¤šå¤„é—®é¢˜å’Œé—æ¼:
é—®é¢˜1: è¯¦æƒ…é¡µå·²æœ‰æ¥¼å±‚Tab,ä½†ç›®æ ‡æè¿°ä¸æ¸…æ™°
ğŸ“ ç°çŠ¶: create.vueå·²å®ç°å®Œæ•´çš„æ¥¼å±‚Tabåˆ‡æ¢(lines 54-138)
ğŸ“ ç°çŠ¶: detail.vueå½“å‰æ²¡æœ‰æ¥¼å±‚Tab,åªæ˜¾ç¤ºå¼‚å¸¸é¡¹æ±‡æ€»
âš ï¸ é—®é¢˜: M3è§„åˆ’æœªæ˜ç¡®æ˜¯è¦åœ¨detail.vueæ–°å¢æ¥¼å±‚Tab,è¿˜æ˜¯ä¼˜åŒ–create.vueçš„Tab
é—®é¢˜2: "å¤åˆ¶æµç¨‹"æ¦‚å¿µæ··æ·†
ğŸ“ ç°çŠ¶: create.vueå·²æœ‰"å¤åˆ¶ä¸Šæ¬¡å·¡æ£€"åŠŸèƒ½(handleCopyLast, lines 264-274)
ğŸ“ ç°çŠ¶: APIå·²æä¾›copyInspection(id)å’ŒcopyLastInspection()ä¸¤ä¸ªæ¥å£
âš ï¸ é—®é¢˜: M3è§„åˆ’æåˆ°"?copy=<id>"é¢„å¡«,ä½†æœªè¯´æ˜ä¸ç°æœ‰åŠŸèƒ½çš„å…³ç³»
é—®é¢˜3: ç®¡ç†å‘˜å…¥å£å¯è§æ€§ç¼ºä¹å…·ä½“åœºæ™¯
âš ï¸ é—®é¢˜: è§„åˆ’åªè¯´"ä»…ç®¡ç†å‘˜å¯è§æŒ‡å®šå…¥å£",ä½†æœªæ˜ç¡®:
å“ªäº›å…¥å£éœ€è¦ç®¡ç†å‘˜æƒé™?
detail.vueçš„å“ªäº›æ“ä½œéœ€è¦é™åˆ¶?
æ˜¯å¦éœ€è¦åç«¯æƒé™æ ¡éªŒ?
é—®é¢˜4: å†å²æ¥å£shapeä¸å®Œæ•´
âš ï¸ é—®é¢˜: è§„åˆ’ç»™å‡ºçš„shapeç¤ºä¾‹è¿‡äºç®€åŒ–:
// å®¡æ‰¹: { time, action: submit|approve|reject, operatorName, comment }
// æ‰§è¡Œ: { time, action: start|complete, operatorName, result }
âš ï¸ å·¡æ£€æ¨¡å—ç‰¹æ€§: å·¡æ£€æ²¡æœ‰"å®¡æ‰¹æµ",åªæœ‰"åˆ›å»ºâ†’æ‰§è¡Œâ†’ç”Ÿæˆå·¥å•"
âš ï¸ åº”è¯¥å¯¹é½: M2ç»´ä¿æ¨¡å—çš„å†å²shape,ä½†å·¡æ£€ä¸šåŠ¡é€»è¾‘ä¸åŒ
1.2 âŒ æ­£ç¡®æ€§é—®é¢˜
é—®é¢˜5: ä¸M2å¯¹é½çš„å‡è®¾é”™è¯¯
M2æ˜¯ç»´ä¿è®¡åˆ’æ¨¡å—:æœ‰å®¡æ‰¹æµ(draftâ†’pendingâ†’approvedâ†’rejected)
M3æ˜¯å·¡æ£€æ¨¡å—:æ²¡æœ‰å®¡æ‰¹æµ,åªæœ‰æ‰§è¡Œæµç¨‹
âš ï¸ é”™è¯¯å‡è®¾: "æ“ä½œæ—¥å¿—ä¸M2å†å²shapeå¯¹é½"ä¸é€‚ç”¨äºå·¡æ£€
é—®é¢˜6: é—æ¼æ ¸å¿ƒåŠŸèƒ½ç‚¹
æ ¹æ®ç°æœ‰ä»£ç ,M3åº”é‡ç‚¹å®Œå–„:
è¯¦æƒ…é¡µå¢å¼º: æ·»åŠ å®Œæ•´å·¡æ£€ä¿¡æ¯å±•ç¤º(åŸºæœ¬ä¿¡æ¯+æ¥¼å±‚Tab+ç…§ç‰‡+æ—¥å¿—)
å¤åˆ¶åŠŸèƒ½ç»Ÿä¸€: æ•´åˆ"å¤åˆ¶ä¸Šæ¬¡"å’Œ"å¤åˆ¶æŒ‡å®šå·¡æ£€"
ç”Ÿæˆå·¥å•ä¼˜åŒ–: è¯¦æƒ…é¡µå·²æœ‰,ä½†ç¼ºå°‘å†å²è¿½æº¯
æ•°æ®æƒé™: ä¸å·¥å•æ¨¡å—å¯¹é½çš„mineOnlyé€»è¾‘
ğŸ“‹ äºŒã€åŸºäºç°çŠ¶çš„M3ä¼˜åŒ–è§„åˆ’
2.1 ğŸ¯ é‡æ–°å®šä¹‰ç›®æ ‡ä¸èŒƒå›´
æ ¸å¿ƒç›®æ ‡(é‡æ–°å®šä¹‰)
è¯¦æƒ…é¡µå®Œå–„: æ·»åŠ å®Œæ•´ä¿¡æ¯å±•ç¤º(åŸºæœ¬ä¿¡æ¯+æ¥¼å±‚å·¡æ£€é¡¹+ç…§ç‰‡+æ“ä½œå†å²)
å¤åˆ¶æµç¨‹ç»Ÿä¸€: æ”¯æŒä»åˆ—è¡¨/è¯¦æƒ…å¤åˆ¶ä»»æ„å·¡æ£€è®°å½•,æ¸…é™¤æ•æ„Ÿå­—æ®µ
å†å²è¿½æº¯: å±•ç¤ºå·¡æ£€åˆ›å»º/ä¿®æ”¹/ç”Ÿæˆå·¥å•çš„æ“ä½œå†å²
æƒé™æ§åˆ¶: æ•°æ®æƒé™(mineOnly)ä¸æ“ä½œæƒé™(åˆ é™¤/ç¼–è¾‘)å¯¹é½å·¥å•æ¨¡å—
i18nå®Œå–„: æ‰€æœ‰æ–°å¢æ–‡æ¡ˆå›½é™…åŒ–
æ˜ç¡®ä¸åœ¨èŒƒå›´
âŒ åˆ—è¡¨æ’åºé‡æ„(M2å·²å®Œæˆæ¨¡å¼,M3æ²¿ç”¨å³å¯)
âŒ å¯¼å‡º/æ‰“å°æ¨¡æ¿(M4è§„åˆ’)
âŒ å®¡æ‰¹æµç¨‹(å·¡æ£€æ— å®¡æ‰¹æµ)
âŒ å¤§è§„æ¨¡DBè¿ç§»
2.2 ğŸ“‚ å…³é”®æ–‡ä»¶æ¸…å•(è¡¥å……å®Œæ•´)
å‰ç«¯æ ¸å¿ƒæ–‡ä»¶
frontend/src/views/business/inspection/
â”œâ”€â”€ index.vue              # åˆ—è¡¨é¡µ(å·²å®Œæˆ,M3å°æ”¹)
â”œâ”€â”€ detail.vue             # è¯¦æƒ…é¡µ(æ ¸å¿ƒæ”¹é€ :+åŸºæœ¬ä¿¡æ¯+æ¥¼å±‚Tab+å†å²)
â”œâ”€â”€ create.vue             # åˆ›å»ºé¡µ(å·²å®Œæˆ,M3è¡¥å……å¤åˆ¶normalize)
â”œâ”€â”€ constants.js           # å¸¸é‡é…ç½®(å·²å®Œæˆ,M3å¯èƒ½è¡¥å……)
â””â”€â”€ components/            # å¯é€‰:æŠ½å–å¤ç”¨ç»„ä»¶
    â”œâ”€â”€ InspectionTimeline.vue  # æ“ä½œå†å²æ—¶é—´çº¿
    â””â”€â”€ InspectionFloorTabs.vue # æ¥¼å±‚Tabç»„ä»¶(å¤ç”¨create.vueé€»è¾‘)

frontend/src/api/business/
â””â”€â”€ inspection.js          # API(M3æ–°å¢getHistoryæ¥å£)

frontend/src/store/modules/
â””â”€â”€ user.js                # è§’è‰²åˆ¤æ–­(å·²æœ‰isAdminé€»è¾‘)
åç«¯æ ¸å¿ƒæ–‡ä»¶
backend/ruoyi-admin/src/main/java/com/ruoyi/web/controller/business/
â””â”€â”€ BizInspectionController.java  # æ–°å¢/historyç«¯ç‚¹

backend/ruoyi-admin/src/main/java/com/ruoyi/system/service/
â””â”€â”€ impl/BizInspectionServiceImpl.java  # å†å²èšåˆé€»è¾‘

backend/ruoyi-admin/src/main/resources/mapper/system/
â””â”€â”€ BizInspectionMapper.xml        # SQLæŸ¥è¯¢(å¯èƒ½éœ€è¦å…³è”æ—¥å¿—è¡¨)
ğŸ”§ ä¸‰ã€æ¥å£å¥‘çº¦è®¾è®¡(å¯¹é½å®é™…éœ€æ±‚)
3.1 æ ¸å¿ƒæ¥å£:GET /business/inspection/{id}/history
è¯·æ±‚å‚æ•°
// Queryå‚æ•°(å¯é€‰)
{
  type?: 'all' | 'operation' | 'ticket'  // all=æ‰€æœ‰,operation=æ“ä½œæ—¥å¿—,ticket=å·¥å•ç”Ÿæˆ
  pageNum?: number    // åˆ†é¡µ(å¯é€‰,åˆæœŸä¸åˆ†é¡µ)
  pageSize?: number
}
å“åº”Shape(å¯¹é½å·¡æ£€ä¸šåŠ¡)
interface InspectionHistoryResponse {
  code: number
  msg: string
  data: InspectionHistoryItem[]
}

interface InspectionHistoryItem {
  id: number
  time: string           // æ—¶é—´ "YYYY-MM-DD HH:mm:ss"
  action: InspectionAction  // åŠ¨ä½œç±»å‹
  operatorId: number     // æ“ä½œäººID
  operatorName: string   // æ“ä½œäººå§“å
  detail?: string        // è¯¦æƒ…æè¿°
  relatedId?: number     // å…³è”ID(å¦‚å·¥å•ID)
}

// å·¡æ£€ç‰¹å®šçš„åŠ¨ä½œç±»å‹(ä¸æ˜¯å®¡æ‰¹æµ!)
type InspectionAction =
  | 'create'           // åˆ›å»ºå·¡æ£€
  | 'update'           // ä¿®æ”¹å·¡æ£€
  | 'copy'             // å¤åˆ¶å·¡æ£€
  | 'generate_ticket'  // ç”Ÿæˆå·¥å•
  | 'delete'           // åˆ é™¤(è½¯åˆ é™¤)
å®ç°è¯´æ˜
æ•°æ®æ¥æº:
biz_inspectionè¡¨çš„create_time/create_by/update_time/update_by
biz_ticketè¡¨çš„å…³è”è®°å½•(inspection_idå­—æ®µ)
å¯é€‰:sys_oper_logæ“ä½œæ—¥å¿—è¡¨
æ€§èƒ½ä¼˜åŒ–:
åˆæœŸä¸åˆ†é¡µ(å•æ¡å·¡æ£€å†å²è®°å½•é€šå¸¸<20æ¡)
æ·»åŠ ç´¢å¼•:idx_inspection_id(å¦‚éœ€å…³è”æŸ¥è¯¢)
3.2 è¾…åŠ©æ¥å£:POST /business/inspection/{id}/copy
ç”¨é€”: æœåŠ¡ç«¯å¤åˆ¶(å¯é€‰,å‰ç«¯ä¹Ÿå¯è‡ªè¡Œå®ç°)
è¯·æ±‚Body
{
  "clearFields": ["inspectionId", "inspectionNo", "createTime", "updateTime"]
}
å“åº”
{
  "code": 200,
  "msg": "å¤åˆ¶æˆåŠŸ",
  "data": {
    "inspectionId": null,
    "inspectionNo": null,
    "inspectionDate": "2025-10-17",
    "inspectorName": "å¼ ä¸‰",
    "items": {...},
    "remark": "[å¤åˆ¶è‡ª#INS202510170001] 2025-10-17 15:30:00"
  }
}
ğŸ“ å››ã€å‰ç«¯ä»»åŠ¡æ‹†è§£(ä¼˜åŒ–ç‰ˆ)
Update Todos

æ·±å…¥åˆ†æM3è§„åˆ’çš„åˆç†æ€§ä¸æ­£ç¡®æ€§

è¯„ä¼°ç°æœ‰ä»£ç ä¸M3ç›®æ ‡çš„å¯¹é½åº¦

ä¼˜åŒ–M3è§„åˆ’æ–¹æ¡ˆå¹¶è¾“å‡ºå®Œæ•´æ–‡æ¡£
4.1 ä»»åŠ¡ç»„A:è¯¦æƒ…é¡µå®Œå–„(æ ¸å¿ƒ)
A1. è¯¦æƒ…é¡µå¸ƒå±€é‡æ„
æ–‡ä»¶: frontend/src/views/business/inspection/detail.vue å½“å‰çŠ¶æ€: åªæ˜¾ç¤ºå¼‚å¸¸é¡¹æ±‡æ€»+ç”Ÿæˆå·¥å•æŒ‰é’® ç›®æ ‡çŠ¶æ€:
<template>
  <div class="app-container">
    <!-- 1. é¡¶éƒ¨æ“ä½œæ  -->
    <el-card class="header-card">
      <el-button @click="handleBack">è¿”å›åˆ—è¡¨</el-button>
      <el-button type="primary" @click="handleEdit" v-hasPermi="['business:inspection:edit']">ç¼–è¾‘</el-button>
      <el-button @click="handleCopy">å¤åˆ¶å·¡æ£€</el-button>
      <el-button type="danger" @click="handleDelete" v-hasPermi="['business:inspection:remove']" v-if="isAdmin">åˆ é™¤</el-button>
    </el-card>

    <!-- 2. åŸºæœ¬ä¿¡æ¯ -->
    <el-card class="mb20">
      <template #header>åŸºæœ¬ä¿¡æ¯</template>
      <el-descriptions :column="3">
        <el-descriptions-item label="å·¡æ£€ç¼–å·">{{ form.inspectionNo }}</el-descriptions-item>
        <el-descriptions-item label="å·¡æ£€æ—¥æœŸ">{{ form.inspectionDate }}</el-descriptions-item>
        <el-descriptions-item label="å·¡æ£€äºº">{{ form.inspectorName }}</el-descriptions-item>
        <el-descriptions-item label="äº¤æ¥äºº">{{ form.relayPerson }}</el-descriptions-item>
        <el-descriptions-item label="å®Œæˆè¿›åº¦">{{ form.progress }}%</el-descriptions-item>
        <el-descriptions-item label="å¼‚å¸¸æ•°">{{ form.anomalyCount }}</el-descriptions-item>
      </el-descriptions>
    </el-card>

    <!-- 3. æ¥¼å±‚å·¡æ£€é¡¹Tab(å¤ç”¨create.vueé€»è¾‘) -->
    <el-card class="mb20">
      <template #header>å·¡æ£€é¡¹è¯¦æƒ…</template>
      <el-tabs v-model="activeTab">
        <!-- ä¸create.vueç›¸åŒçš„Tabç»“æ„,ä½†åªè¯»å±•ç¤º -->
      </el-tabs>
    </el-card>

    <!-- 4. ç°åœºç…§ç‰‡ -->
    <el-card class="mb20" v-if="form.photos && form.photos.length > 0">
      <template #header>ç°åœºç…§ç‰‡</template>
      <el-image v-for="photo in form.photos" :src="photo" :preview-src-list="form.photos" />
    </el-card>

    <!-- 5. å¼‚å¸¸é¡¹æ±‡æ€»(ä¿ç•™åŸæœ‰) -->
    <el-card class="mb20">
      <template #header>å¼‚å¸¸é¡¹æ±‡æ€»</template>
      <!-- åŸæœ‰å¼‚å¸¸é¡¹å±•ç¤º+ç”Ÿæˆå·¥å•é€»è¾‘ -->
    </el-card>

    <!-- 6. æ“ä½œå†å²(æ–°å¢) -->
    <el-card>
      <template #header>æ“ä½œå†å²</template>
      <el-timeline>
        <el-timeline-item v-for="log in history" :timestamp="log.time">
          <span>{{ getActionText(log.action) }}</span> - {{ log.operatorName }}
          <div v-if="log.detail">{{ log.detail }}</div>
        </el-timeline-item>
      </el-timeline>
    </el-card>
  </div>
</template>
å®ç°è¦ç‚¹:
å¤ç”¨create.vueçš„æ¥¼å±‚Tabç»„ä»¶ç»“æ„,æ”¹ä¸ºåªè¯»å±•ç¤º
è°ƒç”¨getInspection(id)è·å–å®Œæ•´æ•°æ®
è°ƒç”¨getInspectionHistory(id)è·å–æ“ä½œå†å²
isAdminåˆ¤æ–­ä»store/modules/userè·å–
ä¼°æ—¶: 4å°æ—¶
A2. æ¥¼å±‚Tabç»„ä»¶æŠ½å–(å¯é€‰ä¼˜åŒ–)
æ–‡ä»¶: frontend/src/views/business/inspection/components/InspectionFloorTabs.vue ç›®çš„: create.vueå’Œdetail.vueå¤ç”¨ç›¸åŒTabé€»è¾‘ Propsè®¾è®¡:
interface Props {
  items: Record<string, any>  // { floor1: {...}, floor2: {...}, ... }
  readonly?: boolean          // åªè¯»æ¨¡å¼(detailç”¨)
  showProgress?: boolean      // æ˜¾ç¤ºè¿›åº¦æ¡(createç”¨)
}
ä¼°æ—¶: 2å°æ—¶(å¯é€‰)
4.2 ä»»åŠ¡ç»„B:å¤åˆ¶åŠŸèƒ½ç»Ÿä¸€
B1. å¤åˆ¶Normalizeæ˜ å°„æ¸…å•
æ–‡ä»¶: frontend/src/views/business/inspection/create.vue(è¡¥å……) å½“å‰é—®é¢˜: handleCopyLaståªå¤åˆ¶itemså’Œremark,æœªæ¸…é™¤æ•æ„Ÿå­—æ®µ ä¼˜åŒ–æ–¹æ¡ˆ:
// æ–°å¢: ç»Ÿä¸€çš„å¤åˆ¶normalizeå‡½æ•°
function normalizeCopiedInspection(source, copyFrom = 'last') {
  const timestamp = new Date().toLocaleString('zh-CN')
  
  return {
    // æ¸…é™¤æ•æ„Ÿå­—æ®µ
    inspectionId: undefined,
    inspectionNo: undefined,
    createTime: undefined,
    updateTime: undefined,
    createBy: undefined,
    updateBy: undefined,
    
    // ä¿ç•™ä¸šåŠ¡æ•°æ®
    inspectionDate: new Date().toISOString().split('T')[0], // é»˜è®¤ä»Šå¤©
    inspectorName: source.inspectorName || '',
    relayPerson: source.relayPerson || '',
    items: normalizeItems(source.items),
    photos: [], // æ¸…ç©ºç…§ç‰‡
    
    // å¤‡æ³¨è¿½åŠ æ¥æº
    remark: `[å¤åˆ¶è‡ª#${source.inspectionNo || copyFrom}] ${timestamp}\n${source.remark || ''}`
  }
}

// ä¿®æ”¹ç°æœ‰å‡½æ•°
function handleCopyLast() {
  getLatestInspection().then(response => {
    if (response.data) {
      Object.assign(form.value, normalizeCopiedInspection(response.data, 'last'))
      proxy.$modal.msgSuccess(t('business.inspection.message.copySuccess'))
    }
  })
}

// æ–°å¢: ä»URLå‚æ•°å¤åˆ¶
onMounted(() => {
  const copyId = route.query.copy
  if (copyId) {
    getInspection(copyId).then(response => {
      if (response.data) {
        Object.assign(form.value, normalizeCopiedInspection(response.data, response.data.inspectionNo))
      }
    })
  }
})
ä¼°æ—¶: 1.5å°æ—¶
B2. åˆ—è¡¨é¡µ/è¯¦æƒ…é¡µæ·»åŠ å¤åˆ¶å…¥å£
æ–‡ä»¶:
frontend/src/views/business/inspection/index.vue(åˆ—è¡¨)
frontend/src/views/business/inspection/detail.vue(è¯¦æƒ…)
åˆ—è¡¨é¡µæ”¹åŠ¨:
<el-table-column label="æ“ä½œ" width="180">
  <template #default="scope">
    <el-button link @click="handleView(scope.row)">è¯¦æƒ…</el-button>
    <el-button link @click="handleEdit(scope.row)">ç¼–è¾‘</el-button>
    <el-button link @click="handleCopy(scope.row)">å¤åˆ¶</el-button>
  </template>
</el-table-column>

<script>
function handleCopy(row) {
  router.push(`/business/inspection/create?copy=${row.inspectionId}`)
}
</script>
è¯¦æƒ…é¡µæ”¹åŠ¨: é¡¶éƒ¨æ“ä½œæ æ·»åŠ "å¤åˆ¶"æŒ‰é’® ä¼°æ—¶: 0.5å°æ—¶
4.3 ä»»åŠ¡ç»„C:å†å²è¿½æº¯æ¥å…¥
C1. APIæ¥å£å°è£…
æ–‡ä»¶: frontend/src/api/business/inspection.js
/**
 * è·å–å·¡æ£€æ“ä½œå†å²
 * @param {number|string} inspectionId
 * @param {Object} params - { type: 'all'|'operation'|'ticket' }
 */
export function getInspectionHistory(inspectionId, params = {}) {
  return get(`/business/inspection/${inspectionId}/history`, params)
}
ä¼°æ—¶: 0.5å°æ—¶
C2. è¯¦æƒ…é¡µå†å²æ—¶é—´çº¿å±•ç¤º
æ–‡ä»¶: frontend/src/views/business/inspection/detail.vue å®ç°:
<el-card v-loading="historyLoading">
  <template #header>
    <span>æ“ä½œå†å²</span>
    <el-radio-group v-model="historyType" size="small" style="float: right">
      <el-radio-button label="all">å…¨éƒ¨</el-radio-button>
      <el-radio-button label="operation">æ“ä½œ</el-radio-button>
      <el-radio-button label="ticket">å·¥å•</el-radio-button>
    </el-radio-group>
  </template>
  
  <el-timeline v-if="history.length > 0">
    <el-timeline-item 
      v-for="log in history" 
      :key="log.id"
      :timestamp="log.time"
      :type="getTimelineType(log.action)"
    >
      <div class="timeline-content">
        <el-tag :type="getActionTagType(log.action)">{{ getActionText(log.action) }}</el-tag>
        <span class="ml10">{{ log.operatorName }}</span>
      </div>
      <div v-if="log.detail" class="timeline-detail">{{ log.detail }}</div>
      <el-link v-if="log.action === 'generate_ticket' && log.relatedId" 
               :href="`/business/ticket/detail/${log.relatedId}`" 
               type="primary">
        æŸ¥çœ‹å·¥å•
      </el-link>
    </el-timeline-item>
  </el-timeline>
  
  <el-empty v-else description="æš‚æ— æ“ä½œè®°å½•" />
</el-card>

<script>
const history = ref([])
const historyLoading = ref(false)
const historyType = ref('all')

// åŠ è½½å†å²
async function loadHistory() {
  historyLoading.value = true
  try {
    const res = await getInspectionHistory(inspectionId, { type: historyType.value })
    history.value = res.data || []
  } catch (error) {
    proxy.$modal.msgError('åŠ è½½å†å²å¤±è´¥')
  } finally {
    historyLoading.value = false
  }
}

// ç›‘å¬ç±»å‹åˆ‡æ¢
watch(historyType, () => loadHistory())

// åŠ¨ä½œæ–‡æœ¬æ˜ å°„
function getActionText(action) {
  const map = {
    'create': 'åˆ›å»ºå·¡æ£€',
    'update': 'ä¿®æ”¹å·¡æ£€',
    'copy': 'å¤åˆ¶å·¡æ£€',
    'generate_ticket': 'ç”Ÿæˆå·¥å•',
    'delete': 'åˆ é™¤å·¡æ£€'
  }
  return map[action] || action
}

function getActionTagType(action) {
  const map = {
    'create': 'success',
    'update': 'primary',
    'copy': 'info',
    'generate_ticket': 'warning',
    'delete': 'danger'
  }
  return map[action] || ''
}
</script>
ä¼°æ—¶: 2å°æ—¶
4.4 ä»»åŠ¡ç»„D:æƒé™æ§åˆ¶
D1. ç®¡ç†å‘˜åˆ¤æ–­ç»Ÿä¸€
æ–‡ä»¶: frontend/src/composables/usePermission.js(æ–°å»º)
import { computed } from 'vue'
import { useStore } from 'vuex'

export function usePermission() {
  const store = useStore()
  
  const isAdmin = computed(() => {
    const roles = store.getters.roles || []
    return roles.includes('admin') || roles.includes('ROLE_ADMIN')
  })
  
  const hasPermi = (permission) => {
    const permissions = store.getters.permissions || []
    return permissions.includes(permission)
  }
  
  return {
    isAdmin,
    hasPermi
  }
}
ä¼°æ—¶: 0.5å°æ—¶
D2. è¯¦æƒ…é¡µæ“ä½œæƒé™æ§åˆ¶
æ–‡ä»¶: frontend/src/views/business/inspection/detail.vue
<script setup>
import { usePermission } from '@/composables/usePermission'

const { isAdmin, hasPermi } = usePermission()
</script>

<template>
  <!-- ç¼–è¾‘: éœ€è¦ç¼–è¾‘æƒé™æˆ–æ˜¯åˆ›å»ºäºº -->
  <el-button 
    v-if="hasPermi('business:inspection:edit') || form.createBy === currentUserId"
    @click="handleEdit"
  >
    ç¼–è¾‘
  </el-button>
  
  <!-- åˆ é™¤: ä»…ç®¡ç†å‘˜ -->
  <el-button 
    v-if="isAdmin && hasPermi('business:inspection:remove')"
    type="danger" 
    @click="handleDelete"
  >
    åˆ é™¤
  </el-button>
  
  <!-- æ“ä½œå†å²: ä»…ç®¡ç†å‘˜å¯è§å…¨éƒ¨,æ™®é€šç”¨æˆ·ä»…çœ‹è‡ªå·±ç›¸å…³ -->
  <el-card v-if="isAdmin || form.createBy === currentUserId">
    <template #header>æ“ä½œå†å²</template>
    <!-- ... -->
  </el-card>
</template>
ä¼°æ—¶: 1å°æ—¶
D3. åˆ—è¡¨æ•°æ®æƒé™(mineOnly)
æ–‡ä»¶: frontend/src/views/business/inspection/index.vue å¯¹é½å·¥å•æ¨¡å—æ¨¡å¼:
import { buildQueryPayload } from '@/utils/business/mineOnly'

function getList() {
  loading.value = true
  
  const params = buildQueryPayload({
    queryParams: queryParams.value,
    dateRange: dateRange.value,
    isAdmin: isAdmin.value,
    forExport: false
  })
  
  listInspection(params).then(response => {
    inspectionList.value = response.rows
    total.value = response.total
  }).finally(() => {
    loading.value = false
  })
}
ä¼°æ—¶: 1å°æ—¶
4.5 ä»»åŠ¡ç»„E:i18nå›½é™…åŒ–
E1. è¡¥å……è¯­è¨€åŒ…
æ–‡ä»¶:
frontend/src/locales/zh-CN/business/inspection.json
frontend/src/locales/en-US/business/inspection.json
æ–°å¢key:
{
  "action": {
    "copy": "å¤åˆ¶å·¡æ£€",
    "viewHistory": "æŸ¥çœ‹å†å²",
    "backToList": "è¿”å›åˆ—è¡¨"
  },
  "message": {
    "basicInfo": "åŸºæœ¬ä¿¡æ¯",
    "operationHistory": "æ“ä½œå†å²",
    "noHistory": "æš‚æ— æ“ä½œè®°å½•",
    "copySuccess": "å¤åˆ¶æˆåŠŸ,è¯·ä¿®æ”¹åä¿å­˜",
    "copiedFrom": "å¤åˆ¶è‡ª",
    "historyLoadFailed": "åŠ è½½å†å²å¤±è´¥"
  },
  "history": {
    "create": "åˆ›å»ºå·¡æ£€",
    "update": "ä¿®æ”¹å·¡æ£€",
    "copy": "å¤åˆ¶å·¡æ£€",
    "generate_ticket": "ç”Ÿæˆå·¥å•",
    "delete": "åˆ é™¤å·¡æ£€"
  }
}
ä¼°æ—¶: 1å°æ—¶
ğŸ”¨ äº”ã€åç«¯ä»»åŠ¡æ‹†è§£
5.1 ä»»åŠ¡ç»„F:å†å²æ¥å£å®ç°
F1. Controllerå±‚
æ–‡ä»¶: BizInspectionController.java
/**
 * è·å–å·¡æ£€æ“ä½œå†å²
 */
@PreAuthorize("@ss.hasPermi('business:inspection:query')")
@GetMapping("/{inspectionId}/history")
public AjaxResult getHistory(@PathVariable Long inspectionId, 
                             @RequestParam(required = false, defaultValue = "all") String type) {
    List<InspectionHistoryVO> history = bizInspectionService.getInspectionHistory(inspectionId, type);
    return success(history);
}
ä¼°æ—¶: 0.5å°æ—¶
F2. Serviceå±‚
æ–‡ä»¶: BizInspectionServiceImpl.java
@Override
public List<InspectionHistoryVO> getInspectionHistory(Long inspectionId, String type) {
    List<InspectionHistoryVO> history = new ArrayList<>();
    
    // 1. ä»å·¡æ£€è¡¨è·å–åˆ›å»º/ä¿®æ”¹è®°å½•
    BizInspection inspection = inspectionMapper.selectBizInspectionById(inspectionId);
    if (inspection != null) {
        // åˆ›å»ºè®°å½•
        history.add(InspectionHistoryVO.builder()
            .time(inspection.getCreateTime())
            .action("create")
            .operatorId(inspection.getCreateBy())
            .operatorName(inspection.getCreateByName())
            .detail("åˆ›å»ºå·¡æ£€è®°å½•")
            .build());
        
        // ä¿®æ”¹è®°å½•(å¦‚æœupdate_time != create_time)
        if (inspection.getUpdateTime() != null && 
            !inspection.getUpdateTime().equals(inspection.getCreateTime())) {
            history.add(InspectionHistoryVO.builder()
                .time(inspection.getUpdateTime())
                .action("update")
                .operatorId(inspection.getUpdateBy())
                .operatorName(inspection.getUpdateByName())
                .detail("ä¿®æ”¹å·¡æ£€è®°å½•")
                .build());
        }
    }
    
    // 2. ä»å·¥å•è¡¨è·å–ç”Ÿæˆå·¥å•è®°å½•(å¦‚æœinspection_idå­—æ®µå­˜åœ¨)
    if (!"operation".equals(type)) {
        List<BizTicket> tickets = ticketMapper.selectTicketsByInspectionId(inspectionId);
        for (BizTicket ticket : tickets) {
            history.add(InspectionHistoryVO.builder()
                .time(ticket.getCreateTime())
                .action("generate_ticket")
                .operatorId(ticket.getCreateBy())
                .operatorName(ticket.getReporterName())
                .detail("ç”Ÿæˆå·¥å•: " + ticket.getTitle())
                .relatedId(ticket.getTicketId())
                .build());
        }
    }
    
    // 3. å¯é€‰:ä»æ“ä½œæ—¥å¿—è¡¨è·å–è¯¦ç»†æ“ä½œ(å¦‚æœéœ€è¦æ›´å®Œæ•´å†å²)
    // List<SysOperLog> operLogs = operLogMapper.selectOperLogByBusinessId("inspection", inspectionId);
    
    // 4. æŒ‰æ—¶é—´æ’åº
    history.sort(Comparator.comparing(InspectionHistoryVO::getTime));
    
    return history;
}
ä¼°æ—¶: 3å°æ—¶
F3. Mapperå±‚(å¦‚éœ€æ–°å¢SQL)
æ–‡ä»¶: BizInspectionMapper.xml
<!-- å¦‚æœéœ€è¦å…³è”æŸ¥è¯¢å·¥å•,ç¡®ä¿ticketè¡¨æœ‰inspection_idå­—æ®µ -->
<select id="selectTicketsByInspectionId" resultType="BizTicket">
    SELECT 
        ticket_id, title, create_time, create_by, reporter_name
    FROM biz_ticket
    WHERE inspection_id = #{inspectionId}
    ORDER BY create_time ASC
</select>
ä¼°æ—¶: 1å°æ—¶
5.2 ä»»åŠ¡ç»„G:æ•°æ®æƒé™(å¯é€‰)
G1. Mapperæƒé™è¿‡æ»¤
æ–‡ä»¶: BizInspectionMapper.xml
<select id="selectBizInspectionList" parameterType="BizInspection" resultMap="BizInspectionResult">
    SELECT ...
    FROM biz_inspection
    <where>
        <!-- æ•°æ®æƒé™è¿‡æ»¤ -->
        <if test="params.mineOnly != null and params.mineOnly">
            AND (create_by = #{params.userId} OR inspector_name = #{params.username})
        </if>
        
        <!-- å…¶ä»–ç­›é€‰æ¡ä»¶ -->
        <if test="inspectionDate != null">
            AND inspection_date = #{inspectionDate}
        </if>
    </where>
</select>
ä¼°æ—¶: 1å°æ—¶
âœ… å…­ã€æµ‹è¯•éªŒæ”¶æ¸…å•(M3 DoD)
6.1 åŠŸèƒ½éªŒæ”¶
åŠŸèƒ½ç‚¹	éªŒæ”¶æ ‡å‡†	ä¼˜å…ˆçº§
è¯¦æƒ…é¡µ-åŸºæœ¬ä¿¡æ¯	æ˜¾ç¤ºå®Œæ•´å­—æ®µ(ç¼–å·/æ—¥æœŸ/å·¡æ£€äºº/è¿›åº¦/å¼‚å¸¸æ•°)	P0
è¯¦æƒ…é¡µ-æ¥¼å±‚Tab	4ä¸ªæ¥¼å±‚å¯åˆ‡æ¢,æ•°æ®æ­£ç¡®å±•ç¤º,åªè¯»ä¸å¯ç¼–è¾‘	P0
è¯¦æƒ…é¡µ-ç…§ç‰‡	æ˜¾ç¤ºç°åœºç…§ç‰‡,æ”¯æŒé¢„è§ˆ	P1
è¯¦æƒ…é¡µ-å¼‚å¸¸é¡¹	ä¿ç•™åŸæœ‰åŠŸèƒ½,ç”Ÿæˆå·¥å•æ­£å¸¸	P0
è¯¦æƒ…é¡µ-æ“ä½œå†å²	æ˜¾ç¤ºåˆ›å»º/ä¿®æ”¹/ç”Ÿæˆå·¥å•è®°å½•,æ—¶é—´æ­£ç¡®	P0
å¤åˆ¶-åˆ—è¡¨å…¥å£	åˆ—è¡¨æ“ä½œåˆ—æœ‰"å¤åˆ¶"æŒ‰é’®,è·³è½¬create?copy=id	P0
å¤åˆ¶-è¯¦æƒ…å…¥å£	è¯¦æƒ…é¡µé¡¶éƒ¨æœ‰"å¤åˆ¶"æŒ‰é’®	P0
å¤åˆ¶-å­—æ®µæ¸…ç†	æ¸…é™¤id/ç¼–å·/æ—¶é—´/åˆ›å»ºäºº,ä¿ç•™ä¸šåŠ¡æ•°æ®	P0
å¤åˆ¶-å¤‡æ³¨è¿½åŠ 	è‡ªåŠ¨è¿½åŠ "å¤åˆ¶è‡ª#XXX æ—¶é—´æˆ³"	P1
æƒé™-ç®¡ç†å‘˜å…¥å£	ç®¡ç†å‘˜å¯è§åˆ é™¤æŒ‰é’®,æ™®é€šç”¨æˆ·ä¸å¯è§	P0
æƒé™-æ•°æ®è¿‡æ»¤	éç®¡ç†å‘˜ä»…çœ‹è‡ªå·±ç›¸å…³å·¡æ£€	P1
i18n	æ‰€æœ‰æ–°å¢æ–‡æ¡ˆæœ‰ä¸­è‹±æ–‡	P1
6.2 å¥åº·ä¸å›å½’
æ‰‹å·¥æµ‹è¯•(Windowsç»ˆç«¯)
# 1. å¯åŠ¨æœåŠ¡
cd frontend && pnpm run dev
cd backend && mvn spring-boot:run

# 2. æµ‹è¯•åœºæ™¯
- è¯¦æƒ…é¡µ: è®¿é—® /business/inspection/detail/{id}
- å¤åˆ¶: åˆ—è¡¨ç‚¹å¤åˆ¶ -> è¡¨å•é¢„å¡« -> ä¿å­˜ -> è¿”å›åˆ—è¡¨éªŒè¯
- å†å²: è¯¦æƒ…é¡µæŸ¥çœ‹æ“ä½œå†å²,åˆ‡æ¢ç±»å‹è¿‡æ»¤
- æƒé™: ç”¨æ™®é€šç”¨æˆ·ç™»å½•,éªŒè¯æŒ‰é’®/æ•°æ®å¯è§æ€§
Vitestå•å…ƒæµ‹è¯•(è¡¥å……)
æ–‡ä»¶: frontend/src/__tests__/inspection.detail.test.ts
describe('Inspection Detail', () => {
  it('åº”æ­£ç¡®åŠ è½½è¯¦æƒ…æ•°æ®', async () => {
    // Mock getInspection API
    // æ–­è¨€: formå¡«å……æ­£ç¡®
  })
  
  it('åº”æ­£ç¡®åŠ è½½æ“ä½œå†å²', async () => {
    // Mock getInspectionHistory API
    // æ–­è¨€: historyæ•°ç»„é•¿åº¦/å­—æ®µæ­£ç¡®
  })
  
  it('åº”æ­£ç¡®å¤„ç†å¤åˆ¶æ“ä½œ', async () => {
    // ç‚¹å‡»å¤åˆ¶æŒ‰é’®
    // æ–­è¨€: è·¯ç”±è·³è½¬å¸¦copyå‚æ•°
  })
  
  it('ç®¡ç†å‘˜åº”çœ‹åˆ°åˆ é™¤æŒ‰é’®', () => {
    // Mock isAdmin=true
    // æ–­è¨€: åˆ é™¤æŒ‰é’®å¯è§
  })
  
  it('æ™®é€šç”¨æˆ·ä¸åº”çœ‹åˆ°åˆ é™¤æŒ‰é’®', () => {
    // Mock isAdmin=false
    // æ–­è¨€: åˆ é™¤æŒ‰é’®ä¸å¯è§
  })
})
æ–‡ä»¶: frontend/src/__tests__/inspection.copy.test.ts
describe('Inspection Copy', () => {
  it('åº”æ¸…é™¤æ•æ„Ÿå­—æ®µ', () => {
    const source = { inspectionId: 123, inspectionNo: 'INS001', inspectorName: 'å¼ ä¸‰' }
    const result = normalizeCopiedInspection(source)
    
    expect(result.inspectionId).toBeUndefined()
    expect(result.inspectionNo).toBeUndefined()
    expect(result.inspectorName).toBe('å¼ ä¸‰')
  })
  
  it('åº”è¿½åŠ å¤‡æ³¨æ¥æº', () => {
    const source = { inspectionNo: 'INS001', remark: 'åŸå¤‡æ³¨' }
    const result = normalizeCopiedInspection(source)
    
    expect(result.remark).toContain('å¤åˆ¶è‡ª#INS001')
    expect(result.remark).toContain('åŸå¤‡æ³¨')
  })
})
ä¼°æ—¶: 3å°æ—¶
ğŸ“š ä¸ƒã€æ–‡æ¡£äº¤ä»˜ç‰©
7.1 æ¥å£å¥‘çº¦å¿«ç…§
æ–‡ä»¶: docs/api/inspection-history-contract.md
# å·¡æ£€å†å²æ¥å£å¥‘çº¦ v1.0

## GET /business/inspection/{id}/history

### è¯·æ±‚
- Path: `inspectionId` (Long) å·¡æ£€ID
- Query: `type` (String, å¯é€‰) all|operation|ticket, é»˜è®¤all

### å“åº”
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "time": "2025-10-17 10:00:00",
      "action": "create",
      "operatorId": 1,
      "operatorName": "å¼ ä¸‰",
      "detail": "åˆ›å»ºå·¡æ£€è®°å½•"
    },
    {
      "id": 2,
      "time": "2025-10-17 10:30:00",
      "action": "generate_ticket",
      "operatorId": 1,
      "operatorName": "å¼ ä¸‰",
      "detail": "ç”Ÿæˆå·¥å•: 2æ¥¼UPSè´Ÿè½½è¿‡é«˜",
      "relatedId": 456
    }
  ]
}
åŠ¨ä½œç±»å‹æšä¸¾
create: åˆ›å»ºå·¡æ£€
update: ä¿®æ”¹å·¡æ£€
copy: å¤åˆ¶å·¡æ£€
generate_ticket: ç”Ÿæˆå·¥å•
delete: åˆ é™¤å·¡æ£€
æƒé™
business:inspection:query

### 7.2 ä½¿ç”¨è¯´æ˜æ›´æ–°
**æ–‡ä»¶**: `docs/modules/inspection-usage.md` (è¡¥å……)

```markdown
## å¤åˆ¶å·¡æ£€åŠŸèƒ½

### å…¥å£1: åˆ—è¡¨é¡µ
1. åˆ—è¡¨æ“ä½œåˆ—ç‚¹å‡»"å¤åˆ¶"
2. è‡ªåŠ¨è·³è½¬åˆ›å»ºé¡µ,é¢„å¡«æ•°æ®
3. ä¿®æ”¹åä¿å­˜

### å…¥å£2: è¯¦æƒ…é¡µ
1. è¯¦æƒ…é¡µé¡¶éƒ¨ç‚¹å‡»"å¤åˆ¶"
2. è·³è½¬é€»è¾‘åŒä¸Š

### å¤åˆ¶è§„åˆ™
**æ¸…é™¤å­—æ®µ**:
- inspectionId, inspectionNo
- createTime, updateTime, createBy, updateBy

**ä¿ç•™å­—æ®µ**:
- inspectorName, relayPerson
- items(å·¡æ£€é¡¹æ•°æ®)

**ç‰¹æ®Šå¤„ç†**:
- inspectionDate: é‡ç½®ä¸ºå½“å¤©
- photos: æ¸…ç©º
- remark: è¿½åŠ "[å¤åˆ¶è‡ª#åŸç¼–å·] æ—¶é—´æˆ³"
â±ï¸ å…«ã€æ—¶é—´å®‰æ’(ä¼˜åŒ–ç‰ˆ)
8.1 æŒ‰ä¼˜å…ˆçº§åˆ†é˜¶æ®µ
Phase 1: æ ¸å¿ƒåŠŸèƒ½(2å¤©) - P0
Day 1 ä¸Šåˆ:
âœ… F1+F2: åç«¯å†å²æ¥å£å®ç°ä¸è‡ªæµ‹(3.5h)
Day 1 ä¸‹åˆ:
âœ… A1: è¯¦æƒ…é¡µå¸ƒå±€é‡æ„-åŸºæœ¬ä¿¡æ¯+æ¥¼å±‚Tab(4h)
Day 2 ä¸Šåˆ:
âœ… C1+C2: å‰ç«¯å†å²æ¥å£å°è£…+æ—¶é—´çº¿å±•ç¤º(2.5h)
âœ… B1: å¤åˆ¶normalizeé€»è¾‘(1.5h)
Day 2 ä¸‹åˆ:
âœ… B2: åˆ—è¡¨/è¯¦æƒ…å¤åˆ¶å…¥å£(0.5h)
âœ… D1+D2: æƒé™æ§åˆ¶-ç®¡ç†å‘˜åˆ¤æ–­+æ“ä½œæƒé™(1.5h)
âœ… è”è°ƒæµ‹è¯•(2h)
Phase 2: å¢å¼ºåŠŸèƒ½(1å¤©) - P1
Day 3 ä¸Šåˆ:
âœ… D3: åˆ—è¡¨æ•°æ®æƒé™(mineOnly)(1h)
âœ… E1: i18nå›½é™…åŒ–(1h)
âœ… F3+G1: Mapperä¼˜åŒ–ä¸æƒé™è¿‡æ»¤(2h)
Day 3 ä¸‹åˆ:
âœ… å®Œæ•´æµ‹è¯•:æ‰‹å·¥+Vitest(3h)
âœ… æ–‡æ¡£è¾“å‡º:å¥‘çº¦+ä½¿ç”¨è¯´æ˜(1h)
Phase 3: å¯é€‰ä¼˜åŒ–(0.5å¤©) - P2
A2: æ¥¼å±‚Tabç»„ä»¶æŠ½å–(2h)
æ€§èƒ½ä¼˜åŒ–ä¸ä»£ç é‡æ„(2h)
8.2 æ€»ä¼°æ—¶
æ ¸å¿ƒè·¯å¾„(P0): 2å¤©(16å°æ—¶)
å¢å¼ºåŠŸèƒ½(P1): 1å¤©(8å°æ—¶)
å¯é€‰ä¼˜åŒ–(P2): 0.5å¤©(4å°æ—¶)
æ€»è®¡: 2.5~3å¤©
âš ï¸ ä¹ã€é£é™©ä¸ç¼“è§£æªæ–½
9.1 æŠ€æœ¯é£é™©
é£é™©	å½±å“	æ¦‚ç‡	ç¼“è§£æªæ–½
å†å²æ•°æ®æ¥æºä¸è¶³	æ“ä½œå†å²ä¸å®Œæ•´	ä¸­	åˆæœŸä»…ç”¨inspectionè¡¨åŸºç¡€å­—æ®µ;åç»­å¯æ¥å…¥sys_oper_log
æ¥¼å±‚Tabæ•°æ®é‡å¤§	detail.vueåŠ è½½æ…¢	ä½	56é¡¹æ•°æ®é‡ä¸å¤§,æ— éœ€ä¼˜åŒ–;å¦‚éœ€å¯åŠ éª¨æ¶å±
å¤åˆ¶å­—æ®µé—æ¼	æ•æ„Ÿæ•°æ®æ³„éœ²	ä¸­	å»ºç«‹å®Œæ•´æ¸…å•,code reviewå¿…æŸ¥
æƒé™åˆ¤æ–­ä¸ä¸€è‡´	å®‰å…¨æ¼æ´	é«˜	å‰åç«¯åŒé‡æ ¡éªŒ,ç»Ÿä¸€isAdminé€»è¾‘
9.2 ä¸šåŠ¡é£é™©
é£é™©	ç¼“è§£æªæ–½
ä¸M2ç»´ä¿æ¨¡å—æ¦‚å¿µæ··æ·†	M3æ–‡æ¡£æ˜ç¡®"å·¡æ£€æ— å®¡æ‰¹æµ",å†å²shapeå•ç‹¬è®¾è®¡
ç”¨æˆ·ä¹ æƒ¯æ”¹å˜	ä¿ç•™åŸæœ‰å¼‚å¸¸é¡¹å…¥å£,è¯¦æƒ…é¡µä¸ºå¢å¼ºä¸æ›¿æ¢
æ•°æ®æƒé™äº‰è®®	ä¸äº§å“ç¡®è®¤:æ™®é€šç”¨æˆ·æ˜¯å¦å¯è§æ‰€æœ‰å·¡æ£€?
ğŸ¯ åã€å®Œæˆæ ‡å¿—(äº¤ä»˜æ¸…å•)
10.1 ä»£ç äº¤ä»˜
 å‰ç«¯4ä¸ªæ–‡ä»¶ä¿®æ”¹:detail.vue, create.vue, index.vue, inspection.js
 åç«¯3ä¸ªæ–‡ä»¶ä¿®æ”¹:Controller, Service, Mapper
 æ–°å¢composable:usePermission.js
 æ–°å¢æµ‹è¯•:inspection.detail.test.ts, inspection.copy.test.ts
10.2 æ–‡æ¡£äº¤ä»˜
 æ¥å£å¥‘çº¦:docs/api/inspection-history-contract.md
 ä½¿ç”¨è¯´æ˜æ›´æ–°:docs/modules/inspection-usage.md
 M3å®ŒæˆæŠ¥å‘Š(å«æµ‹è¯•ç»“æœ)
10.3 éªŒæ”¶æ ‡å‡†
 æ‰€æœ‰P0åŠŸèƒ½æµ‹è¯•é€šè¿‡
 Vitestæ–°å¢ç”¨ä¾‹100%é€šè¿‡
 i18nä¸­è‹±æ–‡æ–‡æ¡ˆå®Œæ•´
 Code reviewæ— é˜»å¡é—®é¢˜
 éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ,äº§å“éªŒæ”¶é€šè¿‡
Update Todos

æ·±å…¥åˆ†æM3è§„åˆ’çš„åˆç†æ€§ä¸æ­£ç¡®æ€§

è¯„ä¼°ç°æœ‰ä»£ç ä¸M3ç›®æ ‡çš„å¯¹é½åº¦

ä¼˜åŒ–M3è§„åˆ’æ–¹æ¡ˆå¹¶è¾“å‡ºå®Œæ•´æ–‡æ¡£
ğŸ“Š æ€»ç»“:M3ä¼˜åŒ–è§„åˆ’æ ¸å¿ƒè¦ç‚¹
âœ… ä¸»è¦ä¼˜åŒ–ç‚¹
ç›®æ ‡é‡æ–°å®šä¹‰:
âŒ åŸè§„åˆ’:"æ¥¼å±‚Tabåˆ‡æ¢"(create.vueå·²å®ç°,ç›®æ ‡ä¸æ¸…)
âœ… ä¼˜åŒ–å:"è¯¦æƒ…é¡µå®Œå–„"(æ–°å¢åŸºæœ¬ä¿¡æ¯+æ¥¼å±‚Tab+å†å²)
æ¥å£å¥‘çº¦ä¿®æ­£:
âŒ åŸè§„åˆ’:ç…§æ¬M2å®¡æ‰¹æµshape(submit/approve/reject)
âœ… ä¼˜åŒ–å:å·¡æ£€ç‰¹å®šshape(create/update/copy/generate_ticket)
ä»»åŠ¡æ‹†è§£ç»†åŒ–:
âŒ åŸè§„åˆ’:ç¬¼ç»Ÿæè¿°"æ¥¼å±‚Tab+å¤åˆ¶+å†å²"
âœ… ä¼˜åŒ–å:9ä¸ªä»»åŠ¡ç»„(A~G),å…±27ä¸ªå­ä»»åŠ¡,æ¯ä¸ªæœ‰ä¼°æ—¶å’Œä»£ç ç¤ºä¾‹
æµ‹è¯•éªŒæ”¶å®Œå–„:
âŒ åŸè§„åˆ’:åªæ"æ‰‹æµ‹å…¨é“¾è·¯"
âœ… ä¼˜åŒ–å:åŠŸèƒ½éªŒæ”¶è¡¨(12é¡¹)+Vitestç”¨ä¾‹æ¸…å•+è¦†ç›–ç‡è¦æ±‚
é£é™©ç®¡ç†:
âŒ åŸè§„åˆ’:åˆ—å‡ºé£é™©ä½†æ— ç¼“è§£æªæ–½
âœ… ä¼˜åŒ–å:æŠ€æœ¯é£é™©çŸ©é˜µ+ä¸šåŠ¡é£é™©åº”å¯¹+ä¼˜å…ˆçº§åˆ†çº§
ğŸ“‹ å…³é”®äº¤ä»˜ç‰©
ä»£ç : 7ä¸ªå‰ç«¯æ–‡ä»¶ + 3ä¸ªåç«¯æ–‡ä»¶ + 2ä¸ªæµ‹è¯•æ–‡ä»¶
æ–‡æ¡£: æ¥å£å¥‘çº¦ + ä½¿ç”¨è¯´æ˜ + M3å®ŒæˆæŠ¥å‘Š
æ—¶é—´: 2.5~3å¤©(æ ¸å¿ƒ2å¤©,å¢å¼º1å¤©,ä¼˜åŒ–0.5å¤©)